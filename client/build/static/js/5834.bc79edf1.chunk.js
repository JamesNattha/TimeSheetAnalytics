"use strict";(self.webpackChunkmantis_material_react=self.webpackChunkmantis_material_react||[]).push([[5834],{22889:function(e,n,r){var s=r(47313);n.Z=function(){var e=(0,s.useRef)(!0);return(0,s.useEffect)((function(){return function(){e.current=!1}}),[]),e}},98069:function(e,n,r){r.r(n),r.d(n,{default:function(){return I}});var s=r(74165),a=r(15861),t=r(29439),i=r(47313),o=r(58467),l=r(9019),c=r(42832),d=r(61113),u=r(54285),m=r(262),p=r(1413),h=r(84897),f=r(15103),x=r(49914),g=r(15480),Z=r(24631),v=r(76088),w=r(41727),b=r(31095),j=r(3463),y=r(7410),P=r(44714),k=r(11653),S=r(43394),C=r(22889),R=r(94044),A=r(51404),B=(r(18585),r(2419)),q=r(31741),E=r(44874),F=r(67114),N=r.n(F),_=r(46417),z=function(e){var n=e.token,r=e.dataProp,d=(e.refresh,(0,i.useRef)()),m=(0,i.useState)([]),F=(0,t.Z)(m,2),z=F[0],I=F[1],L=(0,i.useState)(""),M=(0,t.Z)(L,2),D=(M[0],M[1],(0,u.Z)().firebaseRegister,(0,i.useState)()),W=(0,t.Z)(D,2),V=(W[0],W[1],(0,i.useState)()),O=(0,t.Z)(V,2),T=(O[0],O[1],(0,C.Z)()),G=(0,o.s0)(),H=(0,i.useState)(),U=(0,t.Z)(H,2),$=(U[0],U[1]),Q=(0,i.useState)(!1),X=(0,t.Z)(Q,2),J=X[0],Y=X[1],K=(0,i.useState)(!1),ee=(0,t.Z)(K,2),ne=ee[0],re=ee[1],se=(0,i.useState)(""),ae=(0,t.Z)(se,2),te=(ae[0],ae[1],(0,i.useState)("")),ie=(0,t.Z)(te,2),oe=(ie[0],ie[1],(0,u.Z)().isLoggedIn,function(){Y(!J)}),le=function(){re(!ne)},ce=function(){var e=(0,a.Z)((0,s.Z)().mark((function e(){var n,r,a;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.Z.enum.getEnumGender();case 3:n=e.sent,r=n.data,a=n.isStatus,console.log(r),void 0!==a&&a&&I(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();console.log("token",n),console.log("data",r),console.log("data user",r[0].User.username);var de=function(e){e.preventDefault()},ue=function(e){e.preventDefault()},me=function(e){var n=(0,B.X)(e);$((0,B.V)(n))},pe=function(e){var n=(0,B.X)(e);$((0,B.V)(n))};(0,i.useEffect)((function(){ce(),me(""),pe("")}),[]);return console.log("values in Register",y.J9),(0,_.jsx)(_.Fragment,{children:(0,_.jsx)(y.J9,{initialValues:{firstname:"",lastname:"",gender:"",password:"",confirmPassword:"",nickname:"",birthday:new Date,submit:null},validationSchema:j.Ry().shape({firstname:j.Z_().max(255).required("First name is required"),lastname:j.Z_().max(255).required("Last name is required"),password:j.Z_().max(255).min(8,"Password must contain english letters and numbers. At least 8 Charaters, 1 uppercase letter, 1 number and 1 special characters").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[^a-zA-Z0-9])/,"Password must contain english letters, numbers and special characters").required("Password is required").matches(/[A-Z]/,"Password must contain at least 1 uppercase letter").matches(/\d/,"Password must contain at least 1 number"),confirmPassword:j.Z_().oneOf([j.iH("password"),null],"Confirm password must be exactly the same with the new password").required("Confirm Password is required"),gender:j.Z_().required("Gender is required"),birthday:j.Z_().required("Birthday is required"),nickname:j.Z_().matches(/^[a-zA-Z\u0e01-\u0e59\s]*$/,"Nickname can only contain Thai and English letters").max(100).required("Nickname is required")}),onSubmit:function(){var e=(0,a.Z)((0,s.Z)().mark((function e(a,t){var i,o,l,c;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=t.setErrors,o=t.setStatus,l=t.setSubmitting,e.prev=1,r[0].User.username&&a.firstname&&a.lastname&&a.gender&&a.password&&a.birthday&&a.nickname&&a.password==a.confirmPassword){e.next=6;break}return i(!0),d.current.scrollIntoView({behavior:"smooth"}),e.abrupt("return");case 6:return c={username:r[0].User.username,firstName:a.firstname,lastName:a.lastname,gender:a.gender,password:a.password,token:n,birthday:a.birthday,nickName:a.nickname},e.prev=7,console.log("newData",c),e.next=11,h.Z.login.userRegister(c);case 11:e.sent,N().fire({title:"Success",timer:2e3,customClass:"modal-success",text:"Your account has been successfully created",showConfirmButton:!1,iconHtml:'<div class="success-icon"></div>'}),G("/login"),e.next=20;break;case 16:e.prev=16,e.t0=e.catch(7),console.error(e.t0),N().fire("Fail to Register","Has problem to Register","error");case 20:e.next=25;break;case 22:e.prev=22,e.t1=e.catch(1),T.current&&(o({success:!1}),i({submit:e.t1.message}),l(!1));case 25:case"end":return e.stop()}}),e,null,[[1,22],[7,16]])})));return function(n,r){return e.apply(this,arguments)}}(),children:function(e){var n=e.errors,s=e.handleBlur,a=e.handleChange,t=e.handleSubmit,i=e.isSubmitting,o=e.touched,u=e.values;return(0,_.jsx)("form",{noValidate:!0,onSubmit:t,ref:d,children:(0,_.jsxs)(l.ZP,{container:!0,spacing:3,children:[(0,_.jsx)(l.ZP,{item:!0,xs:12,children:(0,_.jsxs)(c.Z,{spacing:1,children:[(0,_.jsx)(f.Z,{htmlFor:"email-signup",children:"Email Address"}),(0,_.jsx)(x.Z,{variant:"outlined",fullWidth:!0,id:"email-login",type:"email",value:r[0].User.username,name:"email",onBlur:s,onChange:a,placeholder:"demo@company.com",sx:{bgcolor:"#F0F0F0",borderRadius:"40px"},inputProps:{readOnly:!0}})]})}),(0,_.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,_.jsxs)(c.Z,{spacing:1,children:[(0,_.jsxs)(f.Z,{htmlFor:"firstname-signup",children:["First Name",(0,_.jsx)("div",{style:{color:"red",display:"inline"},children:" *"})]}),(0,_.jsx)(x.Z,{variant:"outlined",id:"firstname-login",type:"firstname",value:u.firstname,name:"firstname",onBlur:s,onChange:a,placeholder:"First name",fullWidth:!0,sx:{borderRadius:"40px"},error:Boolean(o.firstname&&n.firstname)}),o.firstname&&n.firstname&&(0,_.jsx)(g.Z,{error:!0,id:"helper-text-firstname-signup",children:n.firstname})]})}),(0,_.jsx)(l.ZP,{item:!0,xs:12,md:6,children:(0,_.jsxs)(c.Z,{spacing:1,children:[(0,_.jsxs)(f.Z,{htmlFor:"lastname-signup",children:["Last Name",(0,_.jsx)("div",{style:{color:"red",display:"inline"},children:" *"})]}),(0,_.jsx)(x.Z,{variant:"outlined",fullWidth:!0,error:Boolean(o.lastname&&n.lastname),id:"lastname-signup",type:"lastname",value:u.lastname,name:"lastname",onBlur:s,onChange:a,placeholder:"Last name",inputProps:{},sx:{borderRadius:"40px"}}),o.lastname&&n.lastname&&(0,_.jsx)(g.Z,{error:!0,id:"helper-text-lastname-signup",children:n.lastname})]})}),(0,_.jsx)(l.ZP,{item:!0,xs:12,children:(0,_.jsxs)(c.Z,{spacing:1,children:[(0,_.jsxs)(f.Z,{htmlFor:"nickname-signup",children:["Nickname",(0,_.jsx)("div",{style:{color:"red",display:"inline"},children:" *"})]}),(0,_.jsx)(x.Z,{variant:"outlined",fullWidth:!0,error:Boolean(o.nickname&&n.nickname),id:"nickname-signup",type:"text",value:u.nickname,name:"nickname",onBlur:s,onChange:a,placeholder:"Your Nickname",sx:{borderRadius:"40px"}}),o.nickname&&n.nickname&&(0,_.jsx)(g.Z,{error:!0,id:"helper-text-nickname-signup",children:n.nickname})]})}),(0,_.jsx)(l.ZP,{item:!0,xs:12,children:(0,_.jsxs)(c.Z,{spacing:1,children:[(0,_.jsxs)(f.Z,{htmlFor:"birthday-select",children:["Birthday",(0,_.jsx)("div",{style:{color:"red",display:"inline"},children:" *"})]}),(0,_.jsx)(S._,{variant:"outlined",dateAdapter:k.H,sx:{borderRadius:"40px"},children:(0,_.jsx)(P.$,{inputVariant:"outlined",inputFormat:"dd/MM/yyyy",fullWidth:!0,value:u.birthday,sx:{borderRadius:"40px"},maxDate:new Date,onChange:function(e){if(console.log("newValue",e),e&&!isNaN(e.getTime())){var n=e.toISOString();console.log("isoValue",n),a({target:{name:"birthday",value:n}})}},renderInput:function(e){return(0,_.jsx)(Z.Z,(0,p.Z)((0,p.Z)({},e),{},{error:Boolean(o.birthday&&n.birthday),helperText:o.birthday&&n.birthday,onChange:function(e){var n=e.target.value;if(/^\d{2}-\d{2}-\d{4}$/.test(n)){n.getTime();a({target:{name:"birthday",value:n}})}else a({target:{name:"birthday",value:""}})}}))},InputProps:{style:{borderRadius:"40px "}}})})]})}),(0,_.jsx)(l.ZP,{item:!0,xs:12,children:(0,_.jsxs)(c.Z,{spacing:1,children:[(0,_.jsxs)(f.Z,{htmlFor:"group-select",children:["Gender",(0,_.jsx)("div",{style:{color:"red",display:"inline"},children:" *"})]}),(0,_.jsx)(v.Z,{id:"gender",type:"gender",name:"gender",options:z,getOptionLabel:function(e){return e.name_eng||""},value:z&&z.find((function(e){return e.enum_id===u.gender}))||null,onChange:function(e,n){a({target:{name:"gender",value:n.enum_id}})},fullWidth:!0,margin:"normal",renderInput:function(e){return(0,_.jsx)("div",{style:{position:"relative"},children:(0,_.jsx)(Z.Z,(0,p.Z)((0,p.Z)({},e),{},{placeholder:"Select Gender",error:Boolean(o.gender&&n.gender),helperText:o.gender&&n.gender,InputProps:(0,p.Z)((0,p.Z)({},e.InputProps),{},{style:{borderRadius:"30px "}})}))})}})]})}),(0,_.jsx)(l.ZP,{item:!0,xs:12,children:(0,_.jsxs)(c.Z,{spacing:1,children:[(0,_.jsxs)(f.Z,{htmlFor:"password-signup",children:["Password",(0,_.jsx)("div",{style:{color:"red",display:"inline"},children:" *"})]}),(0,_.jsx)(x.Z,{fullWidth:!0,variant:"outlined",error:Boolean(o.password&&n.password),id:"password-signup",type:J?"text":"password",value:u.password,name:"password",onBlur:s,sx:{borderRadius:"40px"},onChange:function(e){a(e),me(e.target.value)},endAdornment:(0,_.jsx)(w.Z,{position:"end",children:(0,_.jsx)(R.Z,{"aria-label":"toggle password visibility",onClick:oe,onMouseDown:de,edge:"end",color:"secondary",children:J?(0,_.jsx)(q.Z,{}):(0,_.jsx)(E.Z,{})})}),placeholder:"******",inputProps:{}}),o.password&&n.password&&(0,_.jsx)(g.Z,{error:!0,id:"helper-text-password-signup",children:n.password}),!o.password&&(0,_.jsx)(g.Z,{id:"helper-text-password",children:"Password must contain english letters and numbers. At least 8 Charaters, 1 uppercase letter, 1 number and 1 special characters"})]})}),(0,_.jsx)(l.ZP,{item:!0,xs:12,children:(0,_.jsxs)(c.Z,{spacing:1,children:[(0,_.jsxs)(f.Z,{htmlFor:"confirmPassword-signup",children:["Confirm Password",(0,_.jsx)("div",{style:{color:"red",display:"inline"},children:" *"})]}),(0,_.jsx)(x.Z,{fullWidth:!0,variant:"outlined",error:Boolean(o.confirmPassword&&n.confirmPassword),id:"confirmPassword-signup",type:ne?"text":"password",value:u.confirmPassword,name:"confirmPassword",sx:{borderRadius:"40px"},onBlur:s,onChange:function(e){a(e),pe(e.target.value)},endAdornment:(0,_.jsx)(w.Z,{position:"end",children:(0,_.jsx)(R.Z,{"aria-label":"toggle password visibility",onClick:le,onMouseDown:ue,edge:"end",color:"secondary",children:ne?(0,_.jsx)(q.Z,{}):(0,_.jsx)(E.Z,{})})}),placeholder:"******"}),o.confirmPassword&&n.confirmPassword&&(0,_.jsx)(g.Z,{error:!0,id:"helper-text-confirmPassword-signup",children:n.confirmPassword}),!o.confirmPassword&&(0,_.jsx)(g.Z,{id:"helper-text-password",children:"The confirm password must be exactly the same with the new password"})]})}),n.submit&&(0,_.jsx)(l.ZP,{item:!0,xs:12,children:(0,_.jsx)(g.Z,{error:!0,children:n.submit})}),(0,_.jsx)(l.ZP,{item:!0,xs:12,children:(0,_.jsx)(A.Z,{children:(0,_.jsx)(b.Z,{disableElevation:!0,disabled:i,fullWidth:!0,size:"large",type:"submit",variant:"contained",sx:{borderRadius:"40px",bgcolor:"#393939","&:hover":{borderColor:"#000"}},children:"Create Account"})})})]})})}})})},I=function(){var e=(0,o.UO)().token,n=(0,i.useState)([]),r=(0,t.Z)(n,2),p=r[0],f=r[1],x=((0,u.Z)().isLoggedIn,(0,i.useState)(!1)),g=(0,t.Z)(x,2),Z=g[0],v=g[1];(0,o.TH)();return(0,i.useEffect)((function(){var n=function(){var n=(0,a.Z)((0,s.Z)().mark((function n(){var r;return(0,s.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,console.log("token",e),n.next=4,h.Z.inviteRegister.getProfile({token:e});case 4:r=n.sent,console.log("API Response:",r),r&&r.data.length>0?(v(!0),f(r.data)):v(!1),console.log(p),n.next=14;break;case 10:n.prev=10,n.t0=n.catch(0),console.error("API Error:",n.t0),v(!1);case 14:case"end":return n.stop()}}),n,null,[[0,10]])})));return function(){return n.apply(this,arguments)}}();n()}),[e]),console.log("token is",e),(0,_.jsx)(m.Z,{children:Z?(0,_.jsxs)(l.ZP,{container:!0,spacing:3,children:[(0,_.jsx)(l.ZP,{item:!0,xs:12,children:(0,_.jsx)(c.Z,{direction:"row",justifyContent:"space-between",alignItems:"baseline",sx:{mb:{xs:-.5,sm:.5}},children:(0,_.jsx)(d.Z,{variant:"h3",children:"Sign up"})})}),(0,_.jsx)(l.ZP,{item:!0,xs:12,children:(0,_.jsx)(z,{token:e,dataProp:p})})]}):null})}},2419:function(e,n,r){r.d(n,{V:function(){return s},X:function(){return a}});var s=function(e){return e<2?{label:"Poor",color:"error.main"}:e<3?{label:"Weak",color:"warning.main"}:e<4?{label:"Normal",color:"warning.dark"}:e<5?{label:"Good",color:"success.main"}:e<6?{label:"Strong",color:"success.dark"}:{label:"Poor",color:"error.main"}},a=function(e){var n=0;return e.length>5&&(n+=1),e.length>7&&(n+=1),function(e){return new RegExp(/[0-9]/).test(e)}(e)&&(n+=1),function(e){return new RegExp(/[!#@$%^&*)(+=._-]/).test(e)}(e)&&(n+=1),function(e){return new RegExp(/[a-z]/).test(e)&&new RegExp(/[A-Z]/).test(e)}(e)&&(n+=1),n}},44874:function(e,n,r){r.d(n,{Z:function(){return l}});var s=r(1413),a=r(47313),t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2Q889.47 375.11 816.7 305l-50.88 50.88C807.31 395.53 843.45 447.4 874.7 512 791.5 684.2 673.4 766 512 766q-72.67 0-133.87-22.38L323 798.75Q408 838 512 838q288.3 0 430.2-300.3a60.29 60.29 0 000-51.5zm-63.57-320.64L836 122.88a8 8 0 00-11.32 0L715.31 232.2Q624.86 186 512 186q-288.3 0-430.2 300.3a60.3 60.3 0 000 51.5q56.69 119.4 136.5 191.41L112.48 835a8 8 0 000 11.31L155.17 889a8 8 0 0011.31 0l712.15-712.12a8 8 0 000-11.32zM149.3 512C232.6 339.8 350.7 258 512 258c54.54 0 104.13 9.36 149.12 28.39l-70.3 70.3a176 176 0 00-238.13 238.13l-83.42 83.42C223.1 637.49 183.3 582.28 149.3 512zm246.7 0a112.11 112.11 0 01146.2-106.69L401.31 546.2A112 112 0 01396 512z"}},{tag:"path",attrs:{d:"M508 624c-3.46 0-6.87-.16-10.25-.47l-52.82 52.82a176.09 176.09 0 00227.42-227.42l-52.82 52.82c.31 3.38.47 6.79.47 10.25a111.94 111.94 0 01-112 112z"}}]},name:"eye-invisible",theme:"outlined"},i=r(20262),o=function(e,n){return a.createElement(i.Z,(0,s.Z)((0,s.Z)({},e),{},{ref:n,icon:t}))};o.displayName="EyeInvisibleOutlined";var l=a.forwardRef(o)},31741:function(e,n,r){r.d(n,{Z:function(){return l}});var s=r(1413),a=r(47313),t={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M942.2 486.2C847.4 286.5 704.1 186 512 186c-192.2 0-335.4 100.5-430.2 300.3a60.3 60.3 0 000 51.5C176.6 737.5 319.9 838 512 838c192.2 0 335.4-100.5 430.2-300.3 7.7-16.2 7.7-35 0-51.5zM512 766c-161.3 0-279.4-81.8-362.7-254C232.6 339.8 350.7 258 512 258c161.3 0 279.4 81.8 362.7 254C791.5 684.2 673.4 766 512 766zm-4-430c-97.2 0-176 78.8-176 176s78.8 176 176 176 176-78.8 176-176-78.8-176-176-176zm0 288c-61.9 0-112-50.1-112-112s50.1-112 112-112 112 50.1 112 112-50.1 112-112 112z"}}]},name:"eye",theme:"outlined"},i=r(20262),o=function(e,n){return a.createElement(i.Z,(0,s.Z)((0,s.Z)({},e),{},{ref:n,icon:t}))};o.displayName="EyeOutlined";var l=a.forwardRef(o)},4117:function(e,n,r){r.d(n,{Z:function(){return x}});var s=r(63366),a=r(87462),t=r(47313),i=r(2197),o=r(21921),l=r(17592),c=r(77342),d=r(77430),u=r(32298);function m(e){return(0,u.Z)("MuiDialogActions",e)}(0,d.Z)("MuiDialogActions",["root","spacing"]);var p=r(46417),h=["className","disableSpacing"],f=(0,l.ZP)("div",{name:"MuiDialogActions",slot:"Root",overridesResolver:function(e,n){var r=e.ownerState;return[n.root,!r.disableSpacing&&n.spacing]}})((function(e){var n=e.ownerState;return(0,a.Z)({display:"flex",alignItems:"center",padding:8,justifyContent:"flex-end",flex:"0 0 auto"},!n.disableSpacing&&{"& > :not(style) ~ :not(style)":{marginLeft:8}})})),x=t.forwardRef((function(e,n){var r=(0,c.Z)({props:e,name:"MuiDialogActions"}),t=r.className,l=r.disableSpacing,d=void 0!==l&&l,u=(0,s.Z)(r,h),x=(0,a.Z)({},r,{disableSpacing:d}),g=function(e){var n=e.classes,r={root:["root",!e.disableSpacing&&"spacing"]};return(0,o.Z)(r,m,n)}(x);return(0,p.jsx)(f,(0,a.Z)({className:(0,i.Z)(g.root,t),ownerState:x,ref:n},u))}))}}]);