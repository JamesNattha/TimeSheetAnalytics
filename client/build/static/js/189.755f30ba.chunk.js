"use strict";(self.webpackChunkmantis_material_react=self.webpackChunkmantis_material_react||[]).push([[189],{50189:function(e,t,r){r.r(t),r.d(t,{default:function(){return xe}});var n=r(1413),a=r(74165),o=r(15861),s=r(29439),i=r(47313),c=r(94469),l=r(19860),d=r(17592),u=r(17551),p=r(57829),f=r(70501),m=r(42832),h=r(49914),x=r(31095),g=r(51629),_=r(9019),v=r(1550),C=r(23931),Z=r(51405),w=r(66835),y=r(23477),b=r(24076),j=r(67478),k=r(57861),S=r(61689),H=r(94044),B=r(10259),M=r(1309),R=(r(67440),r(5186),r(40765)),P=r(45110),F=r(35397),L=r(7519),E=r(30078),I=r(75835),A=r(46417);var T=function(e){var t=e.columns,r=e.data,a=e.renderRowSubComponent,o=e.handleAdd,c=e.nameCreateButton,T=e.countData,D=e.sortColumn,N=e.fixColumnR,Y=e.fixColumnR2,W=e.fixColumnR3,V=e.fixColumnL,z=e.fixColumnL2,O=(0,l.Z)(),q=(0,i.useMemo)((function(){return F.KR}),[]),G={id:D,desc:!1},J=(0,P.useTable)({columns:t,data:r,filterTypes:q,initialState:{pageIndex:0,pageSize:10,hiddenColumns:t.filter((function(e){return e.hidden})).map((function(e){return e.accessor})),sortBy:[G]}},P.useGlobalFilter,P.useFilters,P.useSortBy,P.useExpanded,P.usePagination,P.useRowSelect),K=J.getTableProps,U=J.getTableBodyProps,X=J.headerGroups,Q=J.prepareRow,$=J.visibleColumns,ee=(J.getToggleAllPageRowsSelectedProps,J.rows),te=J.page,re=J.gotoPage,ne=J.setPageSize,ae=J.state,oe=ae.selectedRowIds,se=ae.pageIndex,ie=ae.pageSize,ce=J.preGlobalFilteredRows,le=J.setGlobalFilter,de=J.selectedFlatRows,ue=J.setSortBy,pe=(0,i.useState)(1),fe=(0,s.Z)(pe,2),me=fe[0],he=fe[1],xe=(0,i.useState)(0),ge=(0,s.Z)(xe,2),_e=(ge[0],ge[1]),ve=ce.length,Ce=(0,i.useState)(""),Ze=(0,s.Z)(Ce,2),we=Ze[0],ye=Ze[1],be=(0,i.useState)("task"),je=(0,s.Z)(be,2),ke=je[0],Se=je[1],He=(0,E.FV)(I.Fl),Be=(0,s.Z)(He,2),Me=(Be[0],Be[1]),Re=(0,i.useState)(ke),Pe=(0,s.Z)(Re,2),Fe=Pe[0],Le=Pe[1];(0,i.useEffect)((function(){Me(ke)}),[ke]);var Ee=(0,d.ZP)(f.Z)((function(e){var t=e.theme,r=e.isclicked;return(0,n.Z)((0,n.Z)({backgroundColor:r?"#000000":"dark"===t.palette.mode?"#1A2027":"#fff"},t.typography.body2),{},{padding:t.spacing(1),textAlign:"center",color:r?"#ffffff":t.palette.text.secondary,"& svg path":{fill:r?"#ffffff":"#333436"},height:100,borderRadius:"5px",transition:"background-color 0.3s","&:hover":{backgroundColor:"#000000","& svg path":{fill:"#ffffff"},"& p":{color:"#ffffff"}}})})),Ie=function(e){Se(e)},Ae=function(e){Le(e)};return de.length,(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)("div",{children:[(0,A.jsx)(L.c,{selected:Object.keys(oe).length,onClick:function(){alert("xxxx");var e=Object.keys(oe).length;_e(e)}}),(0,A.jsxs)(m.Z,{spacing:2,children:[(0,A.jsx)(f.Z,{variant:"outlined",sx:{py:1,boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)",border:"1px solid #ccc",borderRadius:"10px"},children:(0,A.jsxs)("div",{style:{display:"flex",padding:"5px 10px 5px 10px",alignItems:"center"},children:[(0,A.jsx)(h.Z,{id:"start-adornment-email",placeholder:"Type something (".concat(ve," Records)"),startAdornment:(0,A.jsx)(R.Z,{}),fullWidth:!0,value:we,onChange:function(e){return ye(e.target.value)},sx:{borderRadius:20,backgroundColor:"#F3F4F6"}}),(0,A.jsxs)(x.Z,{variant:"contained",sx:{width:"150px",margin:"5px",borderRadius:"40px",height:"37px",backgroundColor:"#232323","&::after":{boxShadow:"0 0 5px 5px rgba(0, 0, 0, 0.9)",borderRadius:"40px"},"&:hover":{backgroundColor:"#686868 !important"}},onClick:function(){le(we)},children:[(0,A.jsx)(B.G,{icon:M.wn1,style:{fontSize:"15px"}}),"Search"]}),(0,A.jsx)(H.Z,{shape:"rounded",variant:"contained",style:{margin:"5px",backgroundColor:"#232323"},onClick:function(){ye(""),le("")},sx:{"&:hover":{backgroundColor:"#686868 !important"}},children:(0,A.jsx)(B.G,{icon:M.jHE})})]})}),(0,A.jsx)(g.Z,{children:(0,A.jsx)(p.Z,{sx:{flexGrow:1},children:(0,A.jsxs)(_.ZP,{container:!0,spacing:2,sx:{marginBottom:"5px"},children:[(0,A.jsx)(_.ZP,{item:!0,xs:6,children:(0,A.jsx)(Ee,{onClick:function(){Ie("task"),Ae("task")},style:{cursor:"pointer"},isclicked:"task"===Fe?1:0,children:(0,A.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",justifyItems:"center"},children:[(0,A.jsx)("div",{style:{marginLeft:"10px"},children:(0,A.jsx)("svg",{width:"37",height:"37",viewBox:"0 0 37 37",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M0.0507812 1.56641C0.0507812 1.01412 0.498497 0.566406 1.05078 0.566406H15.0508C15.6031 0.566406 16.0508 1.01412 16.0508 1.56641V15.5664C16.0508 16.1187 15.6031 16.5664 15.0508 16.5664H1.05078C0.498497 16.5664 0.0507812 16.1187 0.0507812 15.5664V1.56641ZM21.0508 0.566406C20.4985 0.566406 20.0508 1.01412 20.0508 1.56641V15.5664C20.0508 16.1187 20.4985 16.5664 21.0508 16.5664H35.0508C35.6031 16.5664 36.0508 16.1187 36.0508 15.5664V1.56641C36.0508 1.01412 35.6031 0.566406 35.0508 0.566406H21.0508ZM21.0508 20.501C20.4985 20.501 20.0508 20.9487 20.0508 21.501V35.501C20.0508 36.0533 20.4985 36.501 21.0508 36.501H35.0508C35.6031 36.501 36.0508 36.0533 36.0508 35.501V21.501C36.0508 20.9487 35.6031 20.501 35.0508 20.501H21.0508ZM1.05078 20.501C0.498497 20.501 0.0507812 20.9487 0.0507812 21.501V35.501C0.0507812 36.0533 0.498497 36.501 1.05078 36.501H15.0508C15.6031 36.501 16.0508 36.0533 16.0508 35.501V21.501C16.0508 20.9487 15.6031 20.501 15.0508 20.501H1.05078Z",fill:"#333436"})})}),(0,A.jsx)("div",{style:{marginRight:"10px"},children:(0,A.jsxs)("p",{style:{fontSize:"16px"},children:["Total Task",(0,A.jsx)("br",{}),T.task]})})]})})}),(0,A.jsx)(_.ZP,{item:!0,xs:6,children:(0,A.jsx)(Ee,{onClick:function(){Ie("project"),Ae("project")},style:{cursor:"pointer"},isclicked:"project"===Fe?1:0,children:(0,A.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,A.jsx)("div",{style:{marginLeft:"10px"},children:(0,A.jsx)("svg",{width:"36",height:"41",viewBox:"0 0 36 41",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M30.2094 9.29668V26.0271C30.0340 25.7684 29.8317 25.5224 29.6025 25.2931C27.6502 23.3402 24.4844 23.3397 22.5314 25.2921L17.7346 30.0875C15.7814 32.04 15.7812 35.2062 17.7340 37.1591L20.9954 40.4204H4.06541C2.00269 40.4204 0.330566 38.7483 0.330566 36.6856V9.29668C0.330566 7.23395 2.00269 5.56183 4.06541 5.56183H10.2902C10.2902 2.81594 12.5241 0.582031 15.2700 0.582031C18.0159 0.582031 20.2498 2.81594 20.2498 5.56183H26.4745C28.5372 5.56183 30.2094 7.23395 30.2094 9.29668ZM27.4804 30.2426L26.0980 31.6245H30.2094H33.1040C34.2086 31.6245 35.1040 32.5199 35.1040 33.6245C35.1040 34.7291 34.2086 35.6245 33.1040 35.6245H30.2094H26.0990L27.4806 37.0062C27.9231 37.4487 28.1150 38.0470 28.0561 38.6245C28.0110 39.0664 27.8192 39.4961 27.4806 39.8346C27.0906 40.2247 26.5796 40.4199 26.0684 40.4204C26.0671 40.4204 26.0658 40.4204 26.0645 40.4204C25.5533 40.4199 25.0422 40.2247 24.6522 39.8346L19.8553 35.0377C19.7289 34.9113 19.6230 34.7722 19.5375 34.6245C19.4487 34.4711 19.3820 34.3085 19.3374 34.1412C19.2469 33.8023 19.2470 33.4444 19.3374 33.1056C19.3819 32.9391 19.4482 32.7772 19.5364 32.6245C19.6221 32.4760 19.7285 32.3361 19.8556 32.2091L24.6524 27.4137C24.7501 27.3161 24.8553 27.2307 24.9662 27.1575C25.7426 26.6450 26.7975 26.7306 27.4809 27.4141C27.8194 27.7528 28.0111 28.1826 28.0561 28.6245C28.1149 29.2020 27.9230 29.8002 27.4804 30.2426ZM15.2700 3.6944C14.2386 3.6944 13.4025 4.5305 13.4025 5.5618C13.4025 6.5932 14.2386 7.4293 15.2700 7.4293C16.3013 7.4293 17.1374 6.5932 17.1374 5.5618C17.1374 4.5305 16.3013 3.6944 15.2700 3.6944ZM22.7397 12.5647V11.0085C22.7397 10.8847 22.6905 10.7659 22.6029 10.6784C22.5154 10.5908 22.3966 10.5416 22.2728 10.5416H8.26712C8.14330 10.5416 8.02455 10.5908 7.93700 10.6784C7.84945 10.7659 7.80026 10.8847 7.80026 11.0085V12.5647C7.80026 12.6885 7.84945 12.8072 7.93700 12.8948C8.02455 12.9823 8.14330 13.0315 8.26712 13.0315H22.2728C22.39660 13.0315 22.51540 12.9823 22.60290 12.8948C22.69050 12.8072 22.73970 12.6885 22.7397 12.5647Z",fill:"#333436"})})}),(0,A.jsx)("div",{style:{marginRight:"10px"},children:(0,A.jsxs)("p",{style:{fontSize:"16px"},children:["Total Project ",(0,A.jsx)("br",{}),T.project]})})]})})})]})})}),(0,A.jsx)(f.Z,{variant:"outlined",sx:{py:1,boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)",border:"1px solid #ccc",borderRadius:"10px"},children:(0,A.jsx)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",marginLeft:"7px"},children:(0,A.jsxs)("div",{style:{display:"flex"},children:[(0,A.jsx)("div",{style:{marginRight:"5px",marginTop:"2px"},children:(0,A.jsx)(v.Z,{sx:{minWidth:120},children:(0,A.jsxs)(C.Z,{displayEmpty:!0,inputProps:{"aria-label":"Without label"},sx:{borderRadius:"40px",width:"300px",backgroundColor:"#F3F4F6",padding:"0 0 0 10px","&:hover":{borderColor:"#686868 !important",color:"#686868"}},value:me,onChange:function(e){he(e.target.value),1===e.target.value?ue([{id:D,desc:!1}]):ue([{id:D,desc:!0}])},children:[(0,A.jsx)(Z.Z,{value:1,children:"Sort by the oldest"}),(0,A.jsx)(Z.Z,{value:2,children:"Sort by the newest"})]})})}),(0,A.jsx)("div",{style:{display:"flex",padding:"5px 7px 5px 7px",alignItems:"center"},children:(0,A.jsxs)(x.Z,{onClick:o,variant:"outlined",sx:{width:"150px",marginRight:"10px",height:"auto",borderRadius:"40px",borderColor:"#232323",color:"#232323","&:hover":{borderColor:"#686868 !important",color:"#686868"}},children:["+ ",c]})})]})})}),(0,A.jsxs)("div",{children:[(0,A.jsx)("div",{style:{borderRadius:"10px 10px 0 0",overflowX:"auto",backgroundColor:"#ffffff"},children:"task"===ke?(0,A.jsxs)(w.Z,(0,n.Z)((0,n.Z)({},K()),{},{children:[(0,A.jsx)(y.Z,{style:{backgroundColor:"#E0E0E0"},children:X.map((function(e,t){return(0,A.jsx)(b.Z,(0,n.Z)((0,n.Z)({},e.getHeaderGroupProps()),{},{style:{backgroundColor:"#E0E0E0"},children:e.headers.map((function(e,t){return(0,A.jsx)(j.Z,(0,n.Z)((0,n.Z)({},e.getHeaderProps([{style:e.style}])),{},{style:(0,n.Z)({width:e.width||"auto",position:e.id===N||e.id===Y||e.id===W||e.id===z||e.id===V?"sticky":"inherit",right:e.id===N?0:e.id===Y?"144px":e.id===W?"244px":"auto",left:e.id===z?0:e.id===V?"58px":"auto",zIndex:e.id===N||e.id===Y||e.id===z||e.id===V?1:"auto",textAlign:e.id===N?"center":"left",backgroundColor:e.id===N||e.id===z?"#E0E0E0":"inherit",minWidth:e.id===N?"144px":e.id===Y?"100px":e.id===W?"50px":e.id===V||e.id===z?"58px":"150px"},e.style),children:e.render("Header")}),t)}))}),t)}))}),(0,A.jsx)(k.Z,(0,n.Z)((0,n.Z)({},U()),{},{children:te.map((function(e,r){Q(e);var o=e.getRowProps();return(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)(b.Z,(0,n.Z)((0,n.Z)({},e.getRowProps()),{},{onClick:function(){e.toggleRowSelected()},sx:{cursor:"pointer",bgcolor:e.isSelected?(0,u.Fq)(O.palette.primary.lighter,.35):"inherit"},children:e.cells.map((function(t,r){return(0,A.jsx)(j.Z,(0,n.Z)((0,n.Z)({},t.getCellProps([{className:t.column.className}])),{},{sx:{position:t.column.id===N||t.column.id===Y||t.column.id===W||t.column.id===z||t.column.id===V?"sticky":"inherit",right:t.column.id===N?0:t.column.id===Y?"144px":t.column.id===W?"244px":"auto",left:t.column.id===z?0:t.column.id===V?"58px":"auto",zIndex:t.column.id===N||t.column.id===Y||t.column.id===W||t.column.id===z||t.column.id===V?1:"auto",bgcolor:t.column.id===N||t.column.id===Y||t.column.id===W||V||z?"#ffffff":"none"},children:(0,A.jsx)(S.Z,{title:0===r||r===e.cells.length-1?null:t.render("Cell"),arrow:!0,children:(0,A.jsx)("span",{children:t.column.truncate&&t.value&&t.value.length>t.column.truncate?"".concat(t.value.slice(0,t.column.truncate),"..."):t.render("Cell")})})}),r)}))})),e.isExpanded&&(0,A.jsx)(j.Z,{colSpan:t.length,sx:{height:"100%",width:"100%"},children:a({row:e,rowProps:o,visibleColumns:$})})]},r)}))}))]})):(0,A.jsxs)(w.Z,(0,n.Z)((0,n.Z)({},K()),{},{children:[(0,A.jsx)(y.Z,{style:{backgroundColor:"#E0E0E0"},children:X.map((function(e,t){return(0,A.jsx)(b.Z,(0,n.Z)((0,n.Z)({},e.getHeaderGroupProps()),{},{style:{backgroundColor:"#E0E0E0"},children:e.headers.map((function(e,t){return(0,A.jsx)(j.Z,(0,n.Z)((0,n.Z)({},e.getHeaderProps([{style:e.style}])),{},{children:e.render("Header")}),t)}))}),t)}))}),(0,A.jsx)(k.Z,(0,n.Z)((0,n.Z)({},U()),{},{children:te.map((function(e,r){Q(e);var o=e.getRowProps();return(0,A.jsxs)(i.Fragment,{children:[(0,A.jsx)(b.Z,(0,n.Z)((0,n.Z)({},e.getRowProps()),{},{onClick:function(){e.toggleRowSelected()},sx:{cursor:"pointer",bgcolor:e.isSelected?(0,u.Fq)(O.palette.primary.lighter,.35):"inherit"},children:e.cells.map((function(t,r){return(0,A.jsx)(j.Z,(0,n.Z)((0,n.Z)({},t.getCellProps([{className:t.column.className}])),{},{children:(0,A.jsx)(S.Z,{title:0===r||r===e.cells.length-1?null:t.render("Cell"),arrow:!0,children:(0,A.jsx)("span",{children:t.column.truncate&&t.value&&t.value.length>t.column.truncate?"".concat(t.value.slice(0,t.column.truncate),"..."):t.render("Cell")})})}),r)}))})),e.isExpanded&&(0,A.jsx)(j.Z,{colSpan:t.length,sx:{height:"100%",width:"100%"},children:a({row:e,rowProps:o,visibleColumns:$})})]},r)}))}))]}))}),(0,A.jsx)("div",{style:{backgroundColor:"#ffffff",borderRadius:"0 0 10px 10px",padding:"15px"},children:(0,A.jsx)(L.bG,{gotoPage:re,rows:ee,setPageSize:ne,pageSize:ie,pageIndex:se,sx:{height:"auto",borderRadius:0,borderTop:"none"}})})]})]})]})})},D=r(73842),N=r(84897),Y=r(90743),W=r(56352),V=r(33604),z=r(96467),O=r(15103),q=r(76088),G=r(83929),J=r(44758),K=r(24631),U=r(19536),X=(r(16031),r(3463)),Q=r(70816),$=r.n(Q),ee=r(7410),te=r(18530),re=r(67114),ne=r.n(re),ae=function(e){var t={client_id:"",client_name:"",created_date:"",detail:"",end_date:"",is_active:"",is_deleted:"",project_id:"",project_name:"",start_date:"",work_code:"",work_id:"",work_level:"medium",work_name:"",work_status:"",work_type:"",work_type_name:"",send_to:[],total:""};if(e){t.work_level=e.work_level||"medium";var r=e.total,n=function(e){var t=e;return{total_days:Math.floor(t/480),total_hours:Math.floor(t%480/60),total_minutes:t%60}}(r),a=n.total_days,o=n.total_hours,s=n.total_minutes;for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&""!==e[i]&&(t[i]=e[i]);t.total=r,t.total_days=a,t.total_hours=o,t.total_minutes=s}return t},oe=function(e){var t=e.customer,r=e.onCancel,c=e.fetchWorkTable;console.log("customer",t);(0,l.Z)();var d=(0,W.I0)(),u=!!t,p=(0,i.useState)([]),f=(0,s.Z)(p,2),m=(f[0],f[1]),h=(0,i.useState)([]),g=(0,s.Z)(h,2),v=g[0],C=g[1],Z=(0,i.useState)([]),w=(0,s.Z)(Z,2),y=w[0],b=w[1],j=(0,i.useState)("medium"),k=(0,s.Z)(j,2),S=(k[0],k[1],(0,i.useState)()),H=(0,s.Z)(S,2),B=(H[0],H[1]),M=(0,i.useState)(0),R=(0,s.Z)(M,2),P=(R[0],R[1]),F=v.filter((function(e){return e&&e.send_to})).map((function(e){return e.send_to})).join(", "),L=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.Z.users.fetchMyself();case 3:t=e.sent,r=t.data,t.isStatus&&(n=r.map((function(e){return{send_to:e.user_id,username:e.first_name+" "+e.last_name}})),C(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.Z.users.fetchUsers();case 3:t=e.sent,r=t.data,t.isStatus&&(n=r.map((function(e){return{send_to:e.user_id,username:e.first_name+" "+e.last_name}})),b(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.Z.work.fetchSubDataProject();case 3:t=e.sent,r=t.data,t.isStatus&&(n=r.flatMap((function(e){return e.Projects.map((function(e){return{project_id:e.project_id,project_name:e.project_name}}))})),m(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.Z.enum.getEnum();case 3:t=e.sent,r=t.data,t.isStatus&&(n=r.map((function(e){return{work_type:e.enum_id,name_eng:e.name_eng}})),B(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){I(),E(),T(),L()}),[]),(0,i.useEffect)((function(){var e=D(se.values);P(e)}),[t]);var D=function(e){return 8*(parseInt(e.total_days,10)||0)*60+60*(parseInt(e.total_hours,10)||0)+(parseInt(e.total_minutes,10)||0)},Y=X.Ry().shape({work_name:X.Z_().max(255).required("Work Name is required"),work_type:X.Z_().max(255).required("Work Type is required"),project_id:X.Z_().required("Project Name is required"),send_to:X.IX().of(X.Z_().max(255)).test("send_to-required","Assign is required",(function(e){return e.length>0})),start_date:X.Z_().max(255).required("Start Date is required"),end_date:X.Z_().max(255).required("End Date is required").test("date-order","End Date must be equal or after Start Date",(function(e){var t=this.parent.start_date;return $()(e,"DD-MM-YYYY").isSameOrAfter($()(t,"DD-MM-YYYY"))})),detail:X.Z_().max(500,"You must be at most 500 characters long")}),Q=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!u){e.next=5;break}return e.next=4,re(se.values);case 4:ne().fire({title:"Success",customClass:"modal-success",timer:2e3,showConfirmButton:!1,iconHtml:'<svg xmlns="http://www.w3.org/2000/svg" height="1.25em" viewBox="0 0 512 512" fill="#76ca66">\x3c!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.970-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z"/></svg>'});case 5:r(),c(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0),d((0,te.ss)({open:!0,message:"Error updating project.",variant:"alert",alert:{color:"error"},close:!1}));case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}();function re(e){return oe.apply(this,arguments)}function oe(){return(oe=(0,o.Z)((0,a.Z)().mark((function e(t){var r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=(0,n.Z)((0,n.Z)({},t),{},{start_date:$()(se.values.start_date,"DD-MM-YYYY").format(),end_date:$()(se.values.end_date,"DD-MM-YYYY").format()}),e.next=3,N.Z.work.updateWork([r]);case 3:e.sent;case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var se=(0,ee.TA)({initialValues:ae(t),validationSchema:Y,onSubmit:Q}),ie=(se.errors,se.touched),ce=(se.getFieldProps,se.handleSubmit),le=se.setFieldValue,de=y.slice().sort((function(e,t){return e.username.localeCompare(t.username,"en-US-u-kf-upper",{sensitivity:"base",ignorePunctuation:!0})}));return(0,i.useEffect)((function(){u||le("send_to",[F])}),[F]),console.log("formik.values",se.values),(0,A.jsxs)("div",{children:[(0,A.jsx)(V.Z,{sx:{px:3,backgroundColor:"#f3f4f6 ",fontSize:"24px",fontWeight:"bold"},id:"scroll-dialog-title",children:u?"Assign to":"Add Task"}),(0,A.jsxs)("form",{onSubmit:ce,children:[(0,A.jsxs)(z.Z,{children:[(0,A.jsx)("div",{className:"Client",style:{marginBottom:"20px"},children:(0,A.jsx)(_.ZP,{container:!0,spacing:2,children:(0,A.jsxs)(_.ZP,{item:!0,xs:12,children:[(0,A.jsx)(O.Z,{sx:{marginBottom:"5px"},children:"Assign to"}),(0,A.jsx)(q.Z,{multiple:!0,id:"checkbox-select",options:de,disableCloseOnSelect:!0,getOptionLabel:function(e){return e.username},renderOption:function(e,t,r){var a=r.selected;return(0,A.jsx)("li",(0,n.Z)((0,n.Z)({},e),{},{children:(0,A.jsx)(G.Z,{control:(0,A.jsx)(J.Z,{checked:a}),label:t.username})}))},style:{width:"100%",borderRadius:"30px"},renderInput:function(e){return(0,A.jsx)(K.Z,(0,n.Z)((0,n.Z)({},e),{},{placeholder:"Assigned to",variant:"outlined",sx:{borderRadius:"15px"}}))},value:y.filter((function(e){try{if(Array.isArray(se.values.send_to))return se.values.send_to.includes(e.send_to);var t=JSON.parse(se.values.send_to);if(t.includes(e.send_to))return!0;se.setFieldValue("send_to",t)}catch(r){console.log(r)}})),onChange:function(e,t){var r=t.map((function(e){return e.send_to}));se.setFieldValue("send_to",r)},limitTags:5})]})})}),(0,A.jsxs)("div",{style:{marginTop:"10px",display:"flex",justifyContent:"flex-end",padding:"0 2.5 0 2.5"},children:[(0,A.jsx)("div",{style:{display:"flex",padding:"5px 7px 5px 7px",alignItems:"center"},children:(0,A.jsx)(x.Z,{onClick:function(){Object.keys(ie).some((function(e){return ie[e]}))?ne().fire({title:"Cancel",text:"If you cancel now, your filled information will be discard.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#0066FF",cancelButtonColor:"#0066FF",reverseButtons:!0,confirmButtonText:"Confirm",cancelButtonText:"Keep Editing",customClass:{confirmButton:"confirm-rounded-button",cancelButton:"outlined-button"},iconHtml:'<svg width="150" height="150" viewBox="0 0 47 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M23.4339 0.666016C36.3209 0.666016 46.7673 11.1123 46.7673 23.9993C46.7673 36.8863 36.3209 47.3327 23.4339 47.3327C10.5469 47.3327 0.100586 36.8863 0.100586 23.9993C0.100586 11.1123 10.5469 0.666016 23.4339 0.666016ZM23.4339 5.33268C18.4832 5.33268 13.7353 7.29934 10.2346 10.8C6.73391 14.3007 4.76725 19.0486 4.76725 23.9993C4.76725 28.9501 6.73391 33.698 10.2346 37.1987C13.7353 40.6994 18.4832 42.666 23.4339 42.666C28.3846 42.666 33.1326 40.6994 36.6332 37.1987C40.1339 33.698 42.1006 28.9501 42.1006 23.9993C42.1006 19.0486 40.1339 14.3007 36.6332 10.8C33.1326 7.29934 28.3846 5.33268 23.4339 5.33268ZM23.4339 30.9993C24.0528 30.9993 24.6462 31.2452 25.0838 31.6828C25.5214 32.1203 25.7673 32.7138 25.7673 33.3327C25.7673 33.9515 25.5214 34.545 25.0838 34.9826C24.6462 35.4202 24.0528 35.666 23.4339 35.666C22.8151 35.666 22.2216 35.4202 21.784 34.9826C21.3464 34.545 21.1006 33.9515 21.1006 33.3327C21.1006 32.7138 21.3464 32.1203 21.784 31.6828C22.2216 31.2452 22.8151 30.9993 23.4339 30.9993ZM23.4339 9.99935C24.0528 9.99935 24.6462 10.2452 25.0838 10.6828C25.5214 11.1204 25.7673 11.7138 25.7673 12.3327V26.3327C25.7673 26.9515 25.5214 27.545 25.0838 27.9826C24.6462 28.4202 24.0528 28.666 23.4339 28.666C22.8151 28.666 22.2216 28.4202 21.784 27.9826C21.3464 27.545 21.1006 26.9515 21.1006 26.3327V12.3327C21.1006 11.7138 21.3464 11.1204 21.784 10.6828C22.2216 10.2452 22.8151 9.99935 23.4339 9.99935Z" fill="#ED4040"/></svg>'}).then(function(){var e=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.isConfirmed&&(se.resetForm(),r());case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()):(se.resetForm(),r())},variant:"outlined",sx:{width:"150px",marginLeft:"5px",height:"auto",borderRadius:"40px",borderColor:"#232323",color:"#232323","&:hover":{borderColor:"#686868 !important",color:"#686868"}},children:"Cancel"})}),(0,A.jsx)("div",{style:{display:"flex",padding:"5px 7px 5px 7px",alignItems:"center"},children:(0,A.jsx)(x.Z,{type:"submit",variant:"contained",sx:{width:"150px",marginLeft:"5px",height:"auto",borderRadius:"40px",backgroundColor:"#232323","&::after":{boxShadow:"0 0 5px 5px rgba(0, 0, 0, 0.9)",borderRadius:"40px"},"&:hover":{backgroundColor:"#686868 !important"}},children:"Save"})})]})]}),(0,A.jsx)(U.Z,{})]})]})},se=function(e,t,r){var n=e,a=t,o=r,s=(0,i.useMemo)((function(){var e=[];return n&&n.length>0&&a&&o&&n.forEach((function(t){var n=JSON.parse(t.send_to),o=a.some((function(e){return!0===e.is_all})),s=a.map((function(e){return e.user_id})),i=a.map((function(e){return e.group_id})),c=new Map(r.map((function(e){return[e.user_id,"".concat(e.first_name," ").concat(e.last_name)]}))),l="",d="";if(c){d=c.get(t.created_by)||"";var u=n;"string"===typeof u&&(u=JSON.parse(u)),Array.isArray(u)&&(l=u.map((function(e){return c.get(e)||""})).join(", "))}if(!0===o&&l&&d){var p={client_id:t.client_id,client_name:t.client_name,project_id:t.project_id,project_name:t.project_name,work_id:t.work_id,work_code:t.work_code,work_name:t.work_name,work_type:t.work_type,work_type_name:t.work_type_name,work_level:t.work_level,work_status:t.work_status,detail:t.detail,total:t.total,send_to:t.send_to,assign_name:l,name_created:d,action_status:t.action_status,stopwatch:t.sum_time,sum_time:t.stopwatch,start_date:t.start_date,end_date:t.end_date,created_date:t.created_date,is_active:t.is_active,is_deleted:t.is_deleted,created_by:t.created_by,group_id:t.group_id,my_create:s.includes(t.created_by),my_assigned:Array.isArray(n)&&n.some((function(e){return s.includes(e)}))};e.push(p)}else if(i==t.group_id&&l&&d){var f={client_id:t.client_id,client_name:t.client_name,project_id:t.project_id,project_name:t.project_name,work_id:t.work_id,work_code:t.work_code,work_name:t.work_name,work_type:t.work_type,work_type_name:t.work_type_name,work_level:t.work_level,work_status:t.work_status,assign_name:l,name_created:d,detail:t.detail,total:t.total,send_to:t.send_to,action_status:t.action_status,stopwatch:t.sum_time,sum_time:t.stopwatch,start_date:t.start_date,end_date:t.end_date,created_date:t.created_date,is_active:t.is_active,is_deleted:t.is_deleted,created_by:t.created_by,group_id:t.group_id,my_create:s.includes(t.created_by),my_assigned:Array.isArray(n)&&n.some((function(e){return s.includes(e)}))};e.push(f)}})),e}),[n,a,o]).slice().sort((function(e,t){return new Date(e.created_date)-new Date(t.created_date)}));return s.forEach((function(e,t){e.autoNumber=t+1})),s},ie=r(93433),ce=function(e){var t=(0,i.useState)([]),r=(0,s.Z)(t,2),n=r[0],c=r[1];(0,i.useEffect)((function(){var e=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.Z.users.fetchMyself();case 3:t=e.sent,r=t.data,t.isStatus&&c(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e()}),[]);var l=(0,i.useMemo)((function(){var t=n.some((function(e){return!0===e.is_all})),r=new Set(n.map((function(e){return e.group_id})));return e.filter((function(e){return t||r.has(e.group_id)})).map((function(e){return{client_id:e.client_id,client_name:e.client_name,project_id:e.project_id,project_name:e.project_name,start_date:$()(e.start_date).format("DD/MM/YYYY"),finish_date:$()(e.finish_date).format("DD/MM/YYYY"),due_date:$()(e.due_date).format("DD/MM/YYYY"),group_id:e.group_id,group_name:e.group_name}}))}),[e,n]),d=(0,ie.Z)(l).sort((function(e,t){return new Date(t.created_date)-new Date(e.created_date)}));return d.forEach((function(e,t){return e.autoNumber=t+1})),d},le=r(4942);r(40274),r(68694);var de=function(){return(0,A.jsx)("svg",{width:"25",height:"24",viewBox:"0 0 25 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,A.jsx)("path",{d:"M16.1435 3.67356L14.4401 5.37694L19.0153 9.95215L20.7187 8.24876C21.5985 7.36892 21.5985 5.94356 20.7187 5.06372L19.3321 3.67356C18.4522 2.79371 17.0269 2.79371 16.147 3.67356H16.1435ZM13.6447 6.17232L5.44102 14.3795C5.07501 14.7456 4.80753 15.1996 4.65972 15.6958L3.41386 19.9296C3.32587 20.2288 3.40682 20.549 3.62502 20.7672C3.84322 20.9854 4.16349 21.0664 4.45912 20.9819L8.69294 19.7361C9.18918 19.5882 9.64318 19.3208 10.0092 18.9547L18.2199 10.7475L13.6447 6.17232Z",fill:"#0066FF"})})};var ue=function(){return(0,A.jsx)("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,A.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.0678 1.29452C11.2946 0.459719 10.2147 0 9.02265 0C7.82428 0 6.74074 0.456937 5.9711 1.28658C5.19311 2.12535 4.81405 3.26531 4.90306 4.49626C5.07948 6.92479 6.92749 8.90035 9.02265 8.90035C11.1178 8.90035 12.9626 6.92518 13.1418 4.49706C13.232 3.27723 12.8506 2.13966 12.0678 1.29452ZM15.3772 15.4852H17.0942C17.0942 15.4852 17.0942 15.4852 17.0942 15.4853H18.9731C19.5401 15.4853 19.9997 15.9449 19.9997 16.5118C19.9997 17.0788 19.5401 17.5384 18.9731 17.5384H15.3776L16.0868 18.2475C16.4877 18.6484 16.4877 19.2984 16.0868 19.6993C15.6859 20.1002 15.0359 20.1002 14.635 19.6993L12.7364 17.8007H12.7361L12.1726 17.2371C12.1077 17.1723 12.0533 17.1009 12.0094 17.025C11.9639 16.9463 11.9296 16.8628 11.9067 16.7769C11.8603 16.603 11.8603 16.4193 11.9067 16.2454C11.9296 16.16 11.9636 16.0769 12.0088 15.9985C12.0528 15.9223 12.1075 15.8505 12.1727 15.7853L14.6348 13.3239C14.8656 13.0931 15.179 12.9953 15.4799 13.0303C15.7017 13.056 15.9167 13.154 16.0869 13.3242C16.4877 13.7251 16.4876 14.3751 16.0867 14.7759L15.3772 15.4852ZM14.2357 11.6817L14.2887 11.7173C14.0197 11.8409 13.7677 12.0134 13.5461 12.2349L11.084 14.6963C10.2423 15.5377 10.1072 16.8183 10.6788 17.8007H2.02952C1.84645 17.8031 1.66515 17.7646 1.49882 17.6881C1.33249 17.6116 1.1853 17.499 1.06796 17.3585C0.809694 17.0497 0.705591 16.6282 0.782675 16.2018C1.11803 14.3415 2.16461 12.7788 3.80959 11.6817C5.27099 10.7078 7.12218 10.1718 9.02265 10.1718C10.9231 10.1718 12.7743 10.7082 14.2357 11.6817Z",fill:"#0066FF"})})};var pe=function(){return(0,A.jsx)("svg",{width:"19",height:"21",viewBox:"0 0 19 21",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,A.jsx)("path",{d:"M17.4297 3.84961C17.6949 3.84961 17.9493 3.95497 18.1368 4.1425C18.3243 4.33004 18.4297 4.58439 18.4297 4.84961C18.4297 5.11483 18.3243 5.36918 18.1368 5.55672C17.9493 5.74425 17.6949 5.84961 17.4297 5.84961H16.4297L16.4267 5.92061L15.4937 18.9916C15.4578 19.4962 15.232 19.9684 14.8618 20.3132C14.4916 20.6579 14.0045 20.8496 13.4987 20.8496H5.35969C4.85383 20.8496 4.36675 20.6579 3.99657 20.3132C3.62639 19.9684 3.4006 19.4962 3.36469 18.9916L2.43169 5.92161C2.43017 5.89764 2.4295 5.87363 2.42969 5.84961H1.42969C1.16447 5.84961 0.910117 5.74425 0.722581 5.55672C0.535044 5.36918 0.429688 5.11483 0.429688 4.84961C0.429688 4.58439 0.535044 4.33004 0.722581 4.1425C0.910117 3.95497 1.16447 3.84961 1.42969 3.84961H17.4297ZM11.4297 0.849609C11.6949 0.849609 11.9493 0.954966 12.1368 1.1425C12.3243 1.33004 12.4297 1.58439 12.4297 1.84961C12.4297 2.11483 12.3243 2.36918 12.1368 2.55672C11.9493 2.74425 11.6949 2.84961 11.4297 2.84961H7.42969C7.16447 2.84961 6.91012 2.74425 6.72258 2.55672C6.53504 2.36918 6.42969 2.11483 6.42969 1.84961C6.42969 1.58439 6.53504 1.33004 6.72258 1.1425C6.91012 0.954966 7.16447 0.849609 7.42969 0.849609H11.4297Z",fill:"#ED4040"})})},fe=r(66212),me=function(e,t,r,a){var o=(0,i.useState)({}),c=(0,s.Z)(o,2),l=c[0],d=c[1],u=(0,i.useState)(null),p=(0,s.Z)(u,2),f=(p[0],p[1]),h=(0,i.useState)({}),x=(0,s.Z)(h,2),g=(x[0],x[1]);(0,i.useEffect)((function(){return function(){Object.values(l).forEach((function(e){e.timerInstance&&clearInterval(e.timerInstance)}))}}),[]);var _=function(e){var t=e.values.work_id,r=l[t]||{};e.values.action_status&&function(e,t){var r=setInterval((function(){d((function(t){var r;return(0,n.Z)((0,n.Z)({},t),{},(0,le.Z)({},e,(0,n.Z)((0,n.Z)({},t[e]),{},{elapsedTime:((null===(r=t[e])||void 0===r?void 0:r.elapsedTime)||0)+1})))})),g((function(t){return(0,n.Z)((0,n.Z)({},t),{},(0,le.Z)({},e,(t[e]||0)+1))}))}),1e3);d((function(t){return(0,n.Z)((0,n.Z)({},t),{},(0,le.Z)({},e,(0,n.Z)((0,n.Z)({},t[e]),{},{isTimerRunning:!0,timerInstance:r})))})),f(e)}(t,r.elapsedTime)};return(0,i.useEffect)((function(){var e=JSON.parse(localStorage.getItem("timerStates"))||{};d(e),Object.values(l).forEach((function(e,t){if(e.isTimerRunning){var r={values:{work_id:t,action_status:e.action_status}};_(r)}}))}),[]),(0,i.useEffect)((function(){localStorage.setItem("timerStates",JSON.stringify(l))}),[l]),[{Header:(0,A.jsx)("div",{style:{textAlign:"center"},children:"No."}),accessor:"autoNumber",className:"cell-right",width:"5%",disableSortBy:!0},{Header:"Work Id",accessor:"work_id",hidden:!0,disableSortBy:!0},{Header:"Work Code",accessor:"work_code",truncate:12,disableSortBy:!0},{Header:"Work Name",accessor:"work_name",truncate:20,disableSortBy:!0},{Header:"Work Type",accessor:"work_type",disableSortBy:!0,hidden:!0},{Header:"Client Id",accessor:"client_id",disableSortBy:!0,hidden:!0},{Header:"Client Name",accessor:"client_name",truncate:20,disableSortBy:!0},{Header:"ProjectId",accessor:"project_id",disableSortBy:!0,hidden:!0},{Header:"Project Names",accessor:"project_name",truncate:17,disableSortBy:!0},{Header:"Work Type",accessor:"work_type_name",truncate:20,disableSortBy:!0},{Header:"Work Level",accessor:"work_level",truncate:20,disableSortBy:!0},{Header:"Create By",accessor:"name_created",truncate:20,disableSortBy:!0},{Header:"Assigned",accessor:"assign_name",truncate:15,disableSortBy:!0},{Header:"Details",accessor:"detail",truncate:20,disableSortBy:!0},{Header:"Send To",accessor:"send_to",disableSortBy:!0,hidden:!0},{Header:"Total",accessor:"total",disableSortBy:!0,hidden:!0},{Header:"Start Date",accessor:"start_date",disableSortBy:!0},{Header:"End Date",accessor:"end_date",disableSortBy:!0},{Header:"CreateDate",accessor:"created_date",disableSortBy:!0,hidden:!0},{Header:"Created",accessor:"created_by",disableSortBy:!0,hidden:!0},{Header:"Is Active",accessor:"is_active",disableSortBy:!0,hidden:!0},{Header:"Is Deleted",accessor:"is_deleted",disableSortBy:!0,hidden:!0},{Header:"Action Status",accessor:"action_status",disableSortBy:!0,hidden:!0},{Header:"Status",accessor:"work_status",className:"cell-center",style:{textAlign:"center"},disableSortBy:!0,Cell:function(e){var t=e.row.values.work_status;if(t)return(0,A.jsx)(m.Z,{direction:"column",alignItems:"center",justifyContent:"center",spacing:0,children:(0,A.jsx)(fe.Z,{sx:{width:"80px",borderRadius:30,display:"flex",justifyContent:"space-around",flexWrap:"wrap"},size:"small",color:"assigned"===t?"primary":"inprogress"===t?"warning":"error",label:"assigned"===t?"Assigned":"inprogress"===t?"In Progress":""})})}},{Header:"Stopwatch",accessor:"stopwatch",disableSortBy:!0,hidden:!0,Cell:function(e){var t=e.value,r=Number(t),n=Math.floor(r/3600),a=r%3600,o=Math.floor(a/60),s="";return s+=n>0?"".concat(n," H "):"0 H ",s+=o>0?"".concat(o," M"):"0 M "}},{Header:"Sum Time",accessor:"sum_time",disableSortBy:!0,hidden:!0},{Header:"My Group",accessor:"group_id",disableSortBy:!0,hidden:!0},{Header:"My Assigned",accessor:"my_assigned",disableSortBy:!0,hidden:!0},{Header:"My Create",accessor:"my_create",disableSortBy:!0,hidden:!0},{Header:"Actions",accessor:"action",className:"cell-center",width:"10%",disableSortBy:!0,Cell:function(n){var o=n.row.values;return console.log("first Values",o),(0,A.jsx)(m.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:0,children:o&&o.my_create?(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)(S.Z,{title:"Edit",children:(0,A.jsx)(H.Z,{onClick:function(r){r.stopPropagation(),t(o),e()},children:(0,A.jsx)(de,{})})}),(0,A.jsx)(S.Z,{title:"Assigned",children:(0,A.jsx)(H.Z,{onClick:function(e){e.stopPropagation(),t(o),a()},children:(0,A.jsx)(ue,{})})}),(0,A.jsx)(S.Z,{title:"Deleted",children:(0,A.jsx)(H.Z,{onClick:function(){r(o)},children:(0,A.jsx)(pe,{})})})]}):null})}}]},he=function(){return[{Header:(0,A.jsx)("div",{style:{textAlign:"center"},children:"No."}),accessor:"autoNumber",className:"cell-right",disableSortBy:!0},{Header:"Client Id",accessor:"client_id",disableSortBy:!0,hidden:!0},{Header:"Client Name",accessor:"client_name",truncate:20,disableSortBy:!0},{Header:"ProjectId",accessor:"project_id",disableSortBy:!0,hidden:!0},{Header:"Project Names",accessor:"project_name",truncate:17,disableSortBy:!0},{Header:"Group Id",accessor:"group_id",truncate:17,hidden:!0,disableSortBy:!0},{Header:"Group Names",accessor:"group_name",truncate:17,disableSortBy:!0},{Header:"Start Date",accessor:"start_date",disableSortBy:!0},{Header:"Finish Date",accessor:"finish_date",disableSortBy:!0},{Header:"Go Live",accessor:"due_date",disableSortBy:!0},{Header:"CreateDate",accessor:"created_date",disableSortBy:!0,hidden:!0},{Header:"Is Active",accessor:"is_active",disableSortBy:!0,hidden:!0},{Header:"Is Deleted",accessor:"is_deleted",disableSortBy:!0,hidden:!0}]},xe=(r(40201),function(){var e=(0,i.useState)(null),t=(0,s.Z)(e,2),r=t[0],l=t[1],d=(0,i.useState)(!1),u=(0,s.Z)(d,2),p=u[0],f=u[1],m=(0,i.useState)(!1),h=(0,s.Z)(m,2),x=h[0],g=(h[1],(0,i.useState)([])),_=(0,s.Z)(g,2),v=_[0],C=_[1],Z=(0,i.useState)([]),w=(0,s.Z)(Z,2),y=w[0],b=w[1],j=(0,i.useState)(!1),k=(0,s.Z)(j,2),S=k[0],H=k[1],B=(0,i.useState)(!1),M=(0,s.Z)(B,2),R=M[0],P=M[1],F=(0,i.useState)([]),L=(0,s.Z)(F,2),W=L[0],V=L[1],z=(0,i.useState)([]),O=(0,s.Z)(z,2),q=O[0],G=O[1],J=(0,E.sJ)(I.Fl),K=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.Z.work.fetchDataWork();case 3:t=e.sent,r=t.data,t.isStatus&&C(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.Z.users.fetchMyself();case 3:t=e.sent,r=t.data,t.isStatus&&V(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),X=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.Z.users.fetchUsers();case 3:t=e.sent,r=t.data,t.isStatus&&G(r),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){var t,r,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.Z.work.fetchTaskProject();case 3:t=e.sent,r=t.data,n=t.isStatus,console.log("after fetch222",r),n&&b(r),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();(0,i.useEffect)((function(){K(),Q(),U(),X()}),[]);var $=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(!p),r&&p&&l(null),H(!0),H(!S);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ee=function(){var e=(0,o.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:f(!x),r&&x&&l(null),P(!0),P(!R);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function te(e,t){return re.apply(this,arguments)}function re(){return re=(0,o.Z)((0,a.Z)().mark((function e(t,r){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,N.Z.work.deleteWork({work_id:t.work_id,project_id:t.project_id}).then((function(){r()}));case 3:e.sent,e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),console.error(e.t0);case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),re.apply(this,arguments)}function ae(){return(ae=(0,o.Z)((0,a.Z)().mark((function e(t){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{ne().fire({title:"Record removed",text:"After deleting the record, this process will not be able to be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#0066FF",cancelButtonColor:"#0066FF",reverseButtons:!0,confirmButtonText:"Confirm",customClass:{confirmButton:"confirm-rounded-button",cancelButton:"outlined-button"},iconHtml:'<svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 448 512" fill="#ff0000">\x3c!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M432 32H312l-9.4-18.7A24 24 0 0 0 281.1 0H166.8a23.72 23.72 0 0 0-21.4 13.3L136 32H16A16 16 0 0 0 0 48v32a16 16 0 0 0 16 16h416a16 16 0 0 0 16-16V48a16 16 0 0 0-16-16zM53.2 467a48 48 0 0 0 47.9 45h245.8a48 48 0 0 0 47.9-45L416 128H32z"/></svg>'}).then((function(e){e.isConfirmed&&(te(t,K),ne().fire({title:"Success",customClass:"modal-success",allowEscapeKey:!0,timer:2e3,showConfirmButton:!1,iconHtml:'<svg xmlns="http://www.w3.org/2000/svg" height="1.25em" viewBox="0 0 512 512" fill="#76ca66">\x3c!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license (Commercial License) Copyright 2023 Fonticons, Inc. --\x3e<path d="M256 8C119.033 8 8 119.033 8 256s111.033 248 248 248 248-111.033 248-248S392.967 8 256 8zm0 48c110.532 0 200 89.451 200 200 0 110.532-89.451 200-200 200-110.532 0-200-89.451-200-200 0-110.532 89.451-200 200-200m140.204 130.267l-22.536-22.718c-4.667-4.705-12.265-4.736-16.97-.068L215.346 303.697l-59.792-60.277c-4.667-4.705-12.265-4.736-16.970-.069l-22.719 22.536c-4.705 4.667-4.736 12.265-.068 16.971l90.781 91.516c4.667 4.705 12.265 4.736 16.97.068l172.589-171.204c4.704-4.668 4.734-12.266.067-16.971z"/></svg>'}))}))}catch(r){console.error(r)}case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ie,le={task:se(v,W,q).length,project:ce(y).length},de={columns:me($,l,(function(e){return ae.apply(this,arguments)}),ee),data:se(v,W,q),getHeaderProps:function(e){return e.getSortByToggleProps()},nameCreateButton:"Task",countData:le,handleAdd:function(){return $()},handleAssign:function(){return ee()},sortColumn:"created_date",fixColumnL2:"autoNumber",fixColumnR:"action",fixColumnR2:"work_status"},ue={columns:he(),data:ce(y),getHeaderProps:function(e){return e.getSortByToggleProps()},nameCreateButton:"Task",countData:le,handleAdd:function(){return $()},sortColumn:"created_date",fixColumnL:"autoNumber"};return"task"===J?ie=de:"project"===J&&(ie=ue),(0,A.jsx)(A.Fragment,{children:(0,A.jsxs)("div",{children:[(0,A.jsx)(D.Z,{children:(0,A.jsx)(T,(0,n.Z)({},ie))}),(0,A.jsx)(c.Z,{maxWidth:"lg",fullWidth:!0,open:S,PaperProps:{sx:{borderRadius:"10px"}},children:S&&(0,A.jsx)(Y.Z,{customer:r,onCancel:$,fetchWorkTable:K})}),(0,A.jsx)(c.Z,{maxWidth:"lg",fullWidth:!0,open:R,PaperProps:{sx:{borderRadius:"10px"}},children:R&&(0,A.jsx)(oe,{customer:r,onCancel:ee,fetchWorkTable:K})})]})})})},51629:function(e,t,r){r.d(t,{Z:function(){return x}});var n=r(87462),a=r(63366),o=r(47313),s=r(2197),i=r(21921),c=r(77342),l=r(17592),d=r(77430),u=r(32298);function p(e){return(0,u.Z)("MuiTableContainer",e)}(0,d.Z)("MuiTableContainer",["root"]);var f=r(46417),m=["className","component"],h=(0,l.ZP)("div",{name:"MuiTableContainer",slot:"Root",overridesResolver:function(e,t){return t.root}})({width:"100%",overflowX:"auto"}),x=o.forwardRef((function(e,t){var r=(0,c.Z)({props:e,name:"MuiTableContainer"}),o=r.className,l=r.component,d=void 0===l?"div":l,u=(0,a.Z)(r,m),x=(0,n.Z)({},r,{component:d}),g=function(e){var t=e.classes;return(0,i.Z)({root:["root"]},p,t)}(x);return(0,f.jsx)(h,(0,n.Z)({ref:t,as:d,className:(0,s.Z)(g.root,o),ownerState:x},u))}))}}]);