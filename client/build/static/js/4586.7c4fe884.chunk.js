"use strict";(self.webpackChunkmantis_material_react=self.webpackChunkmantis_material_react||[]).push([[4586],{74586:function(e,t,n){n.r(t),n.d(t,{default:function(){return ve}});var r=n(74165),o=n(15861),i=n(29439),s=n(47313),l=n(84897),a=n(19860),d=n(94469),c=n(73842),u=n(76650),p=n(70816),m=n.n(p),v=function(e,t){var n=(0,s.useState)([]),r=(0,i.Z)(n,2);r[0],r[1];return console.log("dataDepartment is easy",e),console.log("name",t),(0,s.useMemo)((function(){var n=[];if("department"===t){var r=0;e.forEach((function(o){if(r++,e.length>0){var i={no:r,name:"".concat(o.position_code),nickname:o.position_name,page:t};n.push(i)}}))}else if(e){var o=0;e.forEach((function(t){if(o++,e.length>0){var r=t.User.first_name&&t.User.last_name?"".concat(t.User.first_name," ").concat(t.User.last_name):null,i=m()(t.User.starting_working_date).format("DD/MM/YYYY"),s={no:o,name:r,nickname:t.User.nick_name,email:t.User.username,startDate:i,created_date:t.created_date,role:t.role};n.push(s)}}))}return console.log("hello is here",n),n}),[e])},x=n(94044),h=n(46417),g=(n(30686).useTheme,function(e,t,n,r,o,i){return[{Header:"no",accessor:"no",disableSortBy:!0,className:"cell-right"},{Header:"id",accessor:"id",disableSortBy:!0,hidden:o},{Header:"Full name",accessor:"name",disableSortBy:!0,Cell:function(e){var t=e.value;return null===t?(0,h.jsx)("span",{style:{color:"#FBC756"},children:"Pending"}):t}},{Header:"Nick Name",accessor:"nickname",disableSortBy:!0,Cell:function(e){var t=e.value;return null===t?(0,h.jsx)("span",{style:{color:"#FBC756"},children:"Pending"}):t}},{Header:"Email",accessor:"email",disableSortBy:!0},{Header:"create",accessor:"created_date",disableSortBy:!0,hidden:!0},{Header:"starting working date",accessor:"startDate",disableSortBy:!0},{Header:"Role",accessor:"role",disableSortBy:!0}]}),f=function(e){var t=e.dataDepartment,n=(0,a.Z)();console.log("dataDepartment",t.profile);var r=t.company,o=v(t.profile,r),l=(0,s.useState)(null),d=(0,i.Z)(l,2),p=d[0],m=d[1],x=(0,s.useState)(!1),f=(0,i.Z)(x,2),Z=f[0],j=f[1],b=(0,s.useState)(!0),C=(0,i.Z)(b,2),y=C[0],w=(C[1],"user"),k=function(){j(!Z),p&&Z&&m(null)},S=g(k,m,w,n,y);if(t.profile.length>0)return(0,h.jsx)("div",{style:{width:"100%",border:"1px solid #ccc",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)",borderRadius:"10px"},children:(0,h.jsx)(c.Z,{children:(0,h.jsx)(u.Z,{columns:S,data:o,namepage:w,handleAdd:k,getHeaderProps:function(e){return e.getSortByToggleProps()},sortColumn:"no"})})})},Z=(n(41412),n(1413)),j=n(17551),b=(n(57829),n(42832)),C=n(70501),y=n(49914),w=n(31095),k=n(1550),S=n(61113),_=n(66835),P=n(23477),B=n(24076),D=n(67478),R=n(57861),F=n(61689),I=n(10259),E=n(1309),H=n(45110),T=n(35397),W=n(7519),U=(n(67440),n(5186),n(40765));var V=function(e){var t=e.columns,n=e.data,r=e.getHeaderProps,o=e.renderRowSubComponent,l=e.handleAdd,d=(e.nameCreateButton,e.sortColumn),c=(0,a.Z)(),u=(0,s.useMemo)((function(){return T.KR}),[]),p=(0,s.useMemo)((function(){return[{id:d,desc:!1}]}),[d]),m=(0,H.useTable)({columns:t,data:n,filterTypes:u,initialState:{pageIndex:0,pageSize:10,hiddenColumns:t.filter((function(e){return e.hidden})).map((function(e){return e.accessor})),sortBy:p}},H.useGlobalFilter,H.useFilters,H.useSortBy,H.useExpanded,H.usePagination,H.useRowSelect),v=m.getTableProps,g=m.getTableBodyProps,f=m.headerGroups,V=m.prepareRow,L=(m.setHiddenColumns,m.allColumns,m.visibleColumns),M=(m.getToggleAllPageRowsSelectedProps,m.rows),q=m.page,N=m.gotoPage,G=m.setPageSize,A=m.state,z=(A.globalFilter,A.selectedRowIds),O=A.pageIndex,Y=A.pageSize,$=m.preGlobalFilteredRows,J=m.setGlobalFilter,K=m.setSortBy,Q=(0,s.useState)(""),X=(0,i.Z)(Q,2),ee=X[0],te=X[1],ne=$.length;(0,s.useEffect)((function(){K([{id:d,desc:!1}])}),[K,d]);var re=(0,s.useState)(1),oe=(0,i.Z)(re,2);return oe[0],oe[1],(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{children:[(0,h.jsx)(W.c,{selected:Object.keys(z).length}),(0,h.jsxs)(b.Z,{spacing:2,children:[(0,h.jsx)(C.Z,{variant:"outlined",sx:{py:1,boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)",border:"1px solid #ccc",borderRadius:"10px"},children:(0,h.jsxs)("div",{style:{display:"flex",padding:"5px 10px 5px 10px",alignItems:"center"},children:[(0,h.jsx)(y.Z,{id:"start-adornment-email",placeholder:"Type something (".concat(ne," Records)"),startAdornment:(0,h.jsx)(U.Z,{}),fullWidth:!0,value:ee,onChange:function(e){return te(e.target.value)},sx:{borderRadius:20,backgroundColor:"#F3F4F6"}}),(0,h.jsxs)(w.Z,{variant:"contained",sx:{width:"150px",margin:"5px",borderRadius:"40px",height:"37px",backgroundColor:"#232323","&::after":{boxShadow:"0 0 5px 5px rgba(0, 0, 0, 0.9)",borderRadius:"40px"},"&:hover":{backgroundColor:"#686868 !important"}},onClick:function(){J(ee)},children:[(0,h.jsx)(I.G,{icon:E.wn1,style:{fontSize:"15px"}}),"Search"]}),(0,h.jsx)(x.Z,{shape:"rounded",variant:"contained",style:{margin:"5px",backgroundColor:"#232323"},onClick:function(){J(""),te("")},sx:{"&:hover":{backgroundColor:"#686868 !important"}},children:(0,h.jsx)(I.G,{icon:E.jHE})})]})}),(0,h.jsx)(C.Z,{variant:"outlined",sx:{py:1,boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)",border:"1px solid #ccc",borderRadius:"10px"},children:(0,h.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,h.jsx)("div",{style:{display:"flex",margin:"10px",padding:"5px 7px 5px 7px",alignItems:"center",borderRadius:"40px"},children:(0,h.jsx)(k.Z,{sx:{minWidth:120},children:(0,h.jsxs)(S.Z,{variant:"subtitle1",component:"span",children:[n.length," Members available in your company."]})})}),(0,h.jsx)("div",{style:{marginRight:"15px"},children:(0,h.jsx)(w.Z,{onClick:l,variant:"outlined",style:{width:"150px",marginLeft:"5px",height:"auto",borderRadius:"40px",borderColor:"#232323",color:"#232323","&:hover":{borderColor:"#686868 !important",color:"#686868"}},children:"Invite Registration"})})]})}),(0,h.jsx)("div",{style:{borderRadius:"10px",overflow:"hidden",backgroundColor:"#ffffff"},children:(0,h.jsxs)(_.Z,(0,Z.Z)((0,Z.Z)({},v()),{},{children:[(0,h.jsx)(P.Z,{style:{backgroundColor:"#E0E0E0"},children:f.map((function(e,t){return(0,h.jsx)(B.Z,(0,Z.Z)((0,Z.Z)({},e.getHeaderGroupProps()),{},{sx:{"& > th:first-of-type":{width:"58px"}},children:e.headers.map((function(e,t){return(0,h.jsx)(D.Z,(0,Z.Z)((0,Z.Z)({},e.getHeaderProps([{className:e.className},r(e)])),{},{sx:{width:e.width||"auto",":not(:last-of-type)::after":{position:"inherit "}},children:(0,h.jsx)(W.RL,{column:e})}),t)}))}),t)}))}),(0,h.jsxs)(R.Z,(0,Z.Z)((0,Z.Z)({},g()),{},{children:[q.map((function(e,t){V(e);var n=e.getRowProps();return(0,h.jsxs)(s.Fragment,{children:[(0,h.jsx)(B.Z,(0,Z.Z)((0,Z.Z)({},e.getRowProps()),{},{onClick:function(){e.toggleRowSelected()},sx:{cursor:"pointer",bgcolor:e.isSelected?(0,j.Fq)(c.palette.primary.lighter,.35):"inherit"},children:e.cells.map((function(t,n){return(0,h.jsx)(D.Z,(0,Z.Z)((0,Z.Z)({},t.getCellProps([{className:t.column.className}])),{},{children:(0,h.jsx)(F.Z,{title:0===n||n===e.cells.length-1?null:t.render("Cell"),arrow:!0,children:(0,h.jsx)("span",{children:t.render("Cell")})})}),n)}))})),e.isExpanded&&(0,h.jsx)(D.Z,{colSpan:9,sx:{height:"100%",width:"100%"},children:o({row:e,rowProps:n,visibleColumns:L})})]},t)})),(0,h.jsx)(B.Z,{sx:{"&:hover":{bgcolor:"transparent !important"}},children:(0,h.jsx)(D.Z,{sx:{p:2,py:3},colSpan:9,children:(0,h.jsx)(W.bG,{gotoPage:N,rows:M,setPageSize:G,pageSize:Y,pageIndex:O})})})]}))]}))})]})]})})},L=function(e){var t=function(e){var t=new Date,n=new Date(e),r=Math.abs(n-t),o=Math.ceil(r/864e5);if(n&&t&&n<=t){var i=Math.floor(o/365),s=o%365,l=Math.floor(s/30),a=s%30,d="";return i>0&&(d+="".concat(i," Year").concat(1!==i?"s":""," ")),l>0&&(d+="".concat(l," Month").concat(1!==l?"s":""," ")),a>0&&(d+="".concat(a," Day").concat(1!==a?"s":""," ")),d.trim()}return n&&t&&n>t?"".concat(o," D Remaining"):null},n=(0,s.useMemo)((function(){var n=[];if(e){e.forEach((function(r){if(console.log("person",r),e.length>0){var o={email:r.User.username,name:r.User.first_name?"".concat(r.User.first_name," ").concat(r.User.last_name):"Pending",nickname:r.User.nick_name?r.User.nick_name:"Pending",exp:t(r.User.starting_working_date),active:r.invite,status:r.is_deleted?{delete:r.is_deleted}:r.is_active&&r.invite?{join:r.invite}:!r.is_active&&r.invite?{active:r.is_active}:r.is_active||r.invite?{}:{join:r.invite},person:r,created_date:r.created_date};n.push(o)}console.log("row",n)}))}return n}),[e]).slice().sort((function(e,t){return new Date(e.created_date)-new Date(t.created_date)}));return n.forEach((function(e,t){e.autoNumber=t+1})),console.log("sort po meung",n),n},M=n(11829),q=n(50294),N=n(66212),G=function(){return(0,h.jsx)("svg",{viewBox:"0 0 17 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,h.jsx)("g",{id:"24pxResend",children:(0,h.jsx)("path",{id:"Vector",d:"M2.9753 3.28516C2.30258 3.28516 1.76318 3.82455 1.76318 4.49728V11.77C1.76318 12.0915 1.89089 12.3998 2.11821 12.6271C2.34552 12.8544 2.65383 12.9821 2.97530 12.9821H9.33894C9.13890 12.5020 9.03591 11.9871 9.03591 11.4670C9.03591 10.4222 9.45095 9.42018 10.1897 8.68140C10.9285 7.94262 11.9305 7.52758 12.9753 7.52758C13.2815 7.52848 13.5866 7.56510 13.8844 7.63667V4.49728C13.8844 4.17580 13.7567 3.86750 13.5294 3.64018C13.3021 3.41286 12.9937 3.28516 12.6723 3.28516H2.9753ZM2.9753 4.49728L7.82379 7.52758L12.6723 4.49728V5.7094L7.82379 8.7397L2.9753 5.7094V4.49728ZM12.6723 8.13364L11.3086 9.49728L12.6723 10.8609V9.95182C13.0741 9.95182 13.4595 10.1115 13.7436 10.3956C14.0278 10.6797 14.1874 11.0651 14.1874 11.4670C14.1874 11.7094 14.1329 11.9397 14.0298 12.1458L14.6905 12.8064C14.9450 12.4246 15.0965 11.9639 15.0965 11.4670C15.0965 10.1276 14.0117 9.04273 12.6723 9.04273V8.13364ZM10.6541 10.1276C10.3995 10.5094 10.2480 10.97 10.2480 11.4670C10.2480 12.8064 11.3329 13.8912 12.6723 13.8912V14.8003L14.0359 13.4367L12.6723 12.073V12.9821C12.2704 12.9821 11.8850 12.8225 11.6009 12.5383C11.3168 12.2542 11.1571 11.8688 11.1571 11.4670C11.1571 11.2246 11.2117 10.9942 11.3147 10.7882L10.6541 10.1276Z",fill:"#0066FF"})})})},A=n(27710),z=n(51997),O=n(30686).useTheme,Y=function(e,t,n,r,o,i,s){var l=[{Header:"No.",accessor:"autoNumber",disableSortBy:!0,width:"5%"},{Header:"Email",accessor:"email",disableSortBy:!0},{Header:"Full Name",accessor:"name",disableSortBy:!0,Cell:function(e){var t=e.row,n=(O(),t.values),r="Pending"===n.name?"#FBC756":"inherit";return(0,h.jsx)("div",{style:{color:r},children:n.name})}},{Header:"NickName",accessor:"nickname",disableSortBy:!0,Cell:function(e){var t=e.row,n=(O(),t.values);console.log("values.nickname",n.nickname);var r="Pending"===n.nickname?"#FBC756":"inherit";return(0,h.jsx)("div",{style:{color:r},children:n.nickname})}},{Header:"Year Experience",accessor:"exp",disableSortBy:!0},{Header:"Data Person",accessor:"person",disableSortBy:!0,hidden:!0},{Header:"active",accessor:"active",disableSortBy:!0,hidden:!0},{Header:(0,h.jsx)("div",{style:{textAlign:"center"},children:"Status"}),accessor:"status",className:"cell-center",disableSortBy:!0,Cell:function(e){var t,n,r,o=e.row,i=(O(),o.values);o.isExpanded,o.toggleRowExpanded;console.log("data value in column",i);var s=null===(t=i.status)||void 0===t?void 0:t.join,l=null===(n=i.status)||void 0===n?void 0:n.delete,a=null===(r=i.status)||void 0===r?void 0:r.active;return!0===s?(0,h.jsx)(b.Z,{direction:"column",alignItems:"center",justifyContent:"center",spacing:0,children:(0,h.jsx)(N.Z,{sx:{width:"80px",borderRadius:30,display:"flex",justifyContent:"space-around",flexWrap:"wrap"},size:"small",color:"success",label:"Joined"})}):!0===l?(0,h.jsx)(b.Z,{direction:"column",alignItems:"center",justifyContent:"center",spacing:0,children:(0,h.jsx)(N.Z,{sx:{p:"4px 12px",width:"80px",borderRadius:30,display:"flex",justifyContent:"space-around",flexWrap:"wrap"},size:"small",color:"error",label:"Deleted"})}):!1===a?(0,h.jsx)(b.Z,{direction:"column",alignItems:"center",justifyContent:"center",spacing:0,children:(0,h.jsx)(N.Z,{sx:{width:"80px",borderRadius:30,display:"flex",justifyContent:"space-around",flexWrap:"wrap"},size:"small",color:"primary",label:"Inactive"})}):!1===s?(0,h.jsx)(b.Z,{direction:"column",alignItems:"center",justifyContent:"center",spacing:0,children:(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(N.Z,{sx:{p:"4px 12px",width:"130px",borderRadius:30},size:"small",color:"warning",label:"Invited Process"})})}):void 0}},{Header:"Actions",className:"cell-center",disableSortBy:!0,accessor:"act",hidden:!o,Cell:function(n){var r=n.row,o=O(),l=r.values,a=r.isExpanded;r.toggleRowExpanded,a?(M.Z,o.palette.error.main):(q.Z,o.palette.secondary.main);return l.status.join||l.active?(0,h.jsxs)(b.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:0,children:[(0,h.jsx)(x.Z,{color:"primary",disabled:!!l.status.join,onClick:function(e){e.stopPropagation(),s(l)}}),(0,h.jsx)(F.Z,{title:"Edit",children:(0,h.jsx)(x.Z,{color:"primary",onClick:function(n){n.stopPropagation(),t(l),e()},children:(0,h.jsx)(A.Z,{twoToneColor:o.palette.primary.main})})}),(0,h.jsx)(F.Z,{title:"Delete",children:(0,h.jsx)(x.Z,{color:"error",onClick:function(e){e.stopPropagation(),i(l)},children:(0,h.jsx)(z.Z,{twoToneColor:o.palette.error.main})})})]}):(console.log("value.status",l.status),(0,h.jsxs)(b.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:0,children:[(0,h.jsx)(F.Z,{title:"Resend",children:(0,h.jsx)(x.Z,{color:"primary",onClick:function(e){e.stopPropagation(),s(l)},children:(0,h.jsx)(G,{})})}),(0,h.jsx)(F.Z,{title:"Edit",children:(0,h.jsx)(x.Z,{color:"primary",onClick:function(n){n.stopPropagation(),t(l),e()},children:(0,h.jsx)(A.Z,{twoToneColor:o.palette.primary.main})})}),(0,h.jsx)(F.Z,{title:"Delete",children:(0,h.jsx)(x.Z,{color:"error",onClick:function(e){e.stopPropagation(),i(l)},children:(0,h.jsx)(z.Z,{twoToneColor:o.palette.error.main})})})]}))}}];return l},$=n(7410),J=n(73428),K=n(33604),Q=n(19536),X=n(96467),ee=n(9019),te=n(15103),ne=n(24631),re=n(76088),oe=n(70024),ie=n(4117),se=n(83929),le=n(3463),ae=n(67114),de=n.n(ae),ce=n(44714),ue=n(11653),pe=n(43394),me=function(e){var t,n,a=e.customer,c=e.handleClose,u=(0,s.useState)([]),p=(0,i.Z)(u,2),m=p[0],v=p[1],x=(0,s.useState)([]),g=(0,i.Z)(x,2),f=g[0],j=g[1],b=(0,s.useState)([]),C=(0,i.Z)(b,2),y=C[0],k=C[1],S=(0,s.useState)(""),_=(0,i.Z)(S,2),P=_[0],B=(_[1],(0,s.useState)([])),D=(0,i.Z)(B,2),R=D[0],F=D[1],I=(0,s.useState)(""),E=(0,i.Z)(I,2),H=(E[0],E[1],(0,s.useState)("")),T=(0,i.Z)(H,2),W=(T[0],T[1],!!a),U=null===a||void 0===a?void 0:a.person,V=(0,s.useState)(null===U||void 0===U||null===(t=U.User)||void 0===t?void 0:t.is_active),L=(0,i.Z)(V,2);L[0],L[1];console.log("user",U);var M=null===a||void 0===a||null===(n=a.person)||void 0===n?void 0:n.invite,q=le.Ry().shape({email:le.Z_().email("Must be a valid email").required("Email is required"),department:le.Z_().max(36).required("Department is required"),group:le.Z_().max(36).required("Group is required"),level:le.Z_().required("Level is required"),position:le.Z_().max(36).required("Position is required"),role:le.Z_().required("Role is required"),startWorkingDate:le.Z_().required("Start working date is required")}),N=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.inviteRegister.getDepartment();case 3:t=e.sent,n=t.data,o=t.isStatus,console.log("isStatus",o),console.log("isStatus data is ",n),void 0!==o&&o&&v(n),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.inviteRegister.getGroup();case 3:t=e.sent,n=t.data,o=t.isStatus,console.log(n),void 0!==o&&o&&j(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.inviteRegister.getPosition();case 3:t=e.sent,n=t.data,o=t.isStatus,console.log(n),void 0!==o&&o&&k(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}(),z=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.enum.getEnumLevel();case 3:t=e.sent,n=t.data,void 0!==(o=t.isStatus)&&o&&(console.log("enum level",n),F(n)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){N(),G(),A(),z()}),[]),console.log("levelData",R);var O=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,n,o,i,s,a,d,u,p,v;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W){e.next=16;break}return e.prev=1,a={userId:null===U||void 0===U?void 0:U.User.user_id,profile_Id:null===U||void 0===U?void 0:U.profile_id,username:Y.values.email||(null===U||void 0===U||null===(t=U.User)||void 0===t?void 0:t.username),department:Y.values.department||(null===U||void 0===U||null===(n=U.Department)||void 0===n?void 0:n.department_id),group:Y.values.group||(null===U||void 0===U||null===(o=U.Group)||void 0===o?void 0:o.group_id),level:Y.values.level.toLowerCase()||(null===U||void 0===U?void 0:U.level),position:Y.values.position||(null===U||void 0===U||null===(i=U.Position)||void 0===i?void 0:i.position_id),role:Y.values.role.toLowerCase()||(null===U||void 0===U?void 0:U.role),startWorkingDate:Y.values.startWorkingDate||(null===U||void 0===U||null===(s=U.User)||void 0===s?void 0:s.starting_working_date),active:Y.values.isChecked},console.log("dataTosend eiei Saveeeeeeeeeeeeeee update",a),e.next=6,l.Z.profile.updateProfile(a);case 6:!1===(d=e.sent).isStatus&&"User with the provided email already exists."===d.message?de().fire("Email already exists in the database!","","error"):(de().fire({title:"Success",timer:2e3,customClass:"modal-success",text:"Edition saved",showConfirmButton:!1,iconHtml:'<div class="success-icon"></div>'}),console.log("Data sent successfully!"),c()),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(1),de().fire({title:"Error",text:"Error to update edition, Please try again",confirmButtonText:"Close",customClass:{confirmButton:"rounded-button "},iconHtml:'<div class="discard-icon"></div>'}),console.error("Error sending data:",e.t0);case 14:e.next=32;break;case 16:return"",e.prev=17,null===(u=m.find((function(e){return e.name===P})))||void 0===u?void 0:u.department_Id,p={username:Y.values.email,department:Y.values.department,group:Y.values.group,level:Y.values.level,position:Y.values.position,role:Y.values.role.toLowerCase(),invite:!1,startWorkingDate:Y.values.startWorkingDate},console.log("Invite button clicked"),console.log("data:",p),e.next=24,l.Z.inviteRegister.inviteUser(p);case 24:!1===(v=e.sent).isStatus&&"User with the provided email already exists."===v.message?(de().fire({title:"Error",text:"This email has already existed in the dashboard, Please try the other one",confirmButtonText:"Close",customClass:{confirmButton:"rounded-button "},iconHtml:'<div class="discard-icon"></div>'}),setEmailError("Email has already existed")):(de().fire({title:"Success",timer:2e3,customClass:"modal-success",text:"The invitation has been send!",showConfirmButton:!1,iconHtml:'<div class="success-icon"></div>'}),c(),console.log("Email sent successfully!",v.message)),e.next=32;break;case 28:e.prev=28,e.t1=e.catch(17),de().fire({title:"Error",text:"Please try again",confirmButtonText:"Close",customClass:{confirmButton:"rounded-button "},iconHtml:'<div class="discard-icon"></div>'}),console.error("Error sending email:",e.t1);case 32:case"end":return e.stop()}}),e,null,[[1,10],[17,28]])})));return function(){return e.apply(this,arguments)}}(),Y=(0,$.TA)({initialValues:function(e){var t,n;console.log("customer",e);var r={email:"",department:"",group:"",level:"",position:"",role:"",startWorkingDate:new Date,isChecked:(null===e||void 0===e||null===(t=e.person)||void 0===t||null===(n=t.User)||void 0===n?void 0:n.is_active)||!1};if(e){var o,i,s,l,a,d,c,u,p,m,v,x,h;console.log("customer?.person?.Department?.department_name",null===e||void 0===e||null===(o=e.person)||void 0===o||null===(i=o.Department)||void 0===i?void 0:i.department_name);var g={email:null===e||void 0===e?void 0:e.email,department:null===e||void 0===e||null===(s=e.person)||void 0===s||null===(l=s.Department)||void 0===l?void 0:l.department_id,group:null===e||void 0===e||null===(a=e.person)||void 0===a||null===(d=a.Group)||void 0===d?void 0:d.group_id,level:null===e||void 0===e||null===(c=e.person)||void 0===c?void 0:c.level,position:null===e||void 0===e||null===(u=e.person)||void 0===u||null===(p=u.Position)||void 0===p?void 0:p.position_id,role:null===e||void 0===e||null===(m=e.person)||void 0===m?void 0:m.role,startWorkingDate:(null===e||void 0===e||null===(v=e.person)||void 0===v||null===(x=v.User)||void 0===x?void 0:x.starting_working_date)||null,isChecked:(null===e||void 0===e||null===(h=e.person)||void 0===h?void 0:h.is_active)||!1};return console.log("Merged Customer:",g),g}return console.log("New Customer:",r),r}(a),validationSchema:q,onSubmit:O}),ae=Y.errors,me=Y.touched,ve=Y.getFieldProps,xe=Y.handleSubmit;return console.log("formik values",Y.values),(0,h.jsx)(J.Z,{children:(0,h.jsxs)(d.Z,{open:open,maxWidth:"md",fullWidth:!0,children:[(0,h.jsx)(K.Z,{sx:{bgcolor:"#F3F4F6"},children:W?"Edit User":"Invite Register"}),(0,h.jsx)(Q.Z,{}),(0,h.jsxs)("form",{onSubmit:xe,children:[(0,h.jsx)(Q.Z,{}),(0,h.jsx)(X.Z,{children:(0,h.jsxs)(ee.ZP,{container:!0,spacing:2,children:[(0,h.jsxs)(ee.ZP,{item:!0,xs:12,children:[(0,h.jsxs)(te.Z,{htmlFor:"email",children:["Email Address",(0,h.jsx)("div",{style:{color:"red",display:"inline"},children:" *"})]}),(0,h.jsx)(ne.Z,(0,Z.Z)((0,Z.Z)({placeholder:"Enter Email",value:Y.values.email},ve("email")),{},{fullWidth:!0,error:Boolean(me.email&&ae.email),helperText:me.email&&ae.email,InputProps:{style:{borderRadius:"30px "}}}))]}),(0,h.jsxs)(ee.ZP,{item:!0,xs:12,sm:6,children:[(0,h.jsxs)(te.Z,{htmlFor:"password-reset",children:["Department",(0,h.jsx)("div",{style:{color:"red",display:"inline"},children:" *"})]}),(0,h.jsx)(re.Z,{id:"country-select-demo",options:m,getOptionLabel:function(e){return e.department_name||""},isOptionEqualToValue:function(e,t){return e.department_id===t.department},value:m.find((function(e){return e.department_id===Y.values.department}))||"",onChange:function(e,t){null!==t?(console.log("vudc]h;jaaaa",t),Y.setFieldValue("department",t.department_id),Y.setFieldValue("position",""),console.log("Selected Client ID:",t.department_id)):Y.setFieldValue("department","")},fullWidth:!0,margin:"normal",renderInput:function(e){return(0,h.jsx)("div",{style:{position:"relative"},children:(0,h.jsx)(ne.Z,(0,Z.Z)((0,Z.Z)((0,Z.Z)({},e),{},{placeholder:"Select Department"},ve("department")),{},{error:Boolean(me.department&&ae.department),helperText:me.department&&ae.department,InputProps:(0,Z.Z)((0,Z.Z)({},e.InputProps),{},{style:(0,Z.Z)((0,Z.Z)({},e.InputProps.sx),{},{borderRadius:"30px "})})}))})}})]}),(0,h.jsxs)(ee.ZP,{item:!0,xs:12,sm:6,children:[(0,h.jsxs)(te.Z,{htmlFor:"password-reset",children:["Group",(0,h.jsx)("div",{style:{color:"red",display:"inline"},children:" *"})]}),(0,h.jsx)(re.Z,{id:"group",options:f,getOptionLabel:function(e){return e.group_name||""},isOptionEqualToValue:function(e,t){return e.group_id===t.group},value:f.find((function(e){return e.group_id===Y.values.group}))||"",onChange:function(e,t){null!==t?(console.log("vudc]h;jaaaa",t),Y.setFieldValue("group",t.group_id),console.log("Selected group ID:",t.group_id)):Y.setFieldValue("group","")},fullWidth:!0,margin:"normal",renderInput:function(e){return(0,h.jsx)("div",{style:{position:"relative"},children:(0,h.jsx)(ne.Z,(0,Z.Z)((0,Z.Z)((0,Z.Z)({},e),{},{placeholder:"Select Group"},ve("group")),{},{error:Boolean(me.group&&ae.group),helperText:me.group&&ae.group,InputProps:(0,Z.Z)((0,Z.Z)({},e.InputProps),{},{style:(0,Z.Z)((0,Z.Z)({},e.InputProps.sx),{},{borderRadius:"30px "})})}))})}})]}),(0,h.jsxs)(ee.ZP,{item:!0,xs:12,sm:6,children:[(0,h.jsxs)(te.Z,{htmlFor:"password-reset",children:["Position",(0,h.jsx)("div",{style:{color:"red",display:"inline"},children:" *"})]}),(0,h.jsx)(re.Z,{id:"position",disabled:!Y.values.department,options:Y.values.department?y.filter((function(e){return e.department_id===Y.values.department})):y,getOptionLabel:function(e){return e.position_name||""},value:y.find((function(e){return e.position_id===Y.values.position}))||"",onChange:function(e,t){null!==t?(console.log("vudc]h;jaaaa",t),Y.setFieldValue("position",t.position_id),console.log("Selected position ID:",t.position_id)):Y.setFieldValue("position","")},fullWidth:!0,margin:"normal",renderInput:function(e){return(0,h.jsx)("div",{style:{position:"relative"},children:(0,h.jsx)(ne.Z,(0,Z.Z)((0,Z.Z)((0,Z.Z)({},e),{},{placeholder:"Select Position",error:Boolean(me.position&&ae.position),helperText:Y.values.department?me.position&&ae.position:null},ve("position")),{},{InputProps:(0,Z.Z)((0,Z.Z)({},e.InputProps),{},{style:{borderRadius:"30px "}})}))})}})]}),(0,h.jsxs)(ee.ZP,{item:!0,xs:12,sm:6,children:[(0,h.jsxs)(te.Z,{htmlFor:"password-reset",children:["Level",(0,h.jsx)("div",{style:{color:"red",display:"inline"},children:" *"})]}),(0,h.jsx)(re.Z,{id:"level",options:R,getOptionLabel:function(e){return e.name_eng||""},value:R.find((function(e){return e.enum_id===Y.values.level}))||"",onChange:function(e,t){null!==t?(Y.setFieldValue("level",t.enum_id),console.log("Selected level ID:",t)):Y.setFieldValue("level","")},fullWidth:!0,margin:"normal",renderInput:function(e){return(0,h.jsx)("div",{style:{position:"relative"},children:(0,h.jsx)(ne.Z,(0,Z.Z)((0,Z.Z)((0,Z.Z)({},e),{},{placeholder:"Select Level"},ve("level")),{},{error:Boolean(me.level&&ae.level),helperText:me.level&&ae.level,InputProps:(0,Z.Z)((0,Z.Z)({},e.InputProps),{},{style:{borderRadius:"30px "}})}))})}})]}),(0,h.jsxs)(ee.ZP,{item:!0,xs:12,sm:6,children:[(0,h.jsxs)(te.Z,{htmlFor:"password-reset",children:["Role",(0,h.jsx)("div",{style:{color:"red",display:"inline"},children:" *"})]}),(0,h.jsx)(re.Z,(0,Z.Z)((0,Z.Z)({id:"role",options:["Admin","Management","Manager","Employee"],getOptionLabel:function(e){return e||""},value:Y.values.role},ve("role")),{},{onChange:function(e,t){null!==t?(Y.setFieldValue("role",t),console.log("Selected role ID:",t)):Y.setFieldValue("role","")},fullWidth:!0,margin:"normal",renderInput:function(e){return(0,h.jsx)("div",{style:{position:"relative"},children:(0,h.jsx)(ne.Z,(0,Z.Z)((0,Z.Z)({},e),{},{placeholder:"Select Role",error:Boolean(me.role&&ae.role),helperText:me.role&&ae.role,InputProps:(0,Z.Z)((0,Z.Z)({},e.InputProps),{},{style:{borderRadius:"30px "}})}))})}})),(0,h.jsx)("div",{children:W&&M&&(0,h.jsx)(se.Z,{control:(0,h.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,h.jsx)(oe.Z,{checked:Y.values.isChecked,onChange:function(e){var t=e.target.checked;console.log("isChecked",t),Y.setFieldValue("isChecked",t)},color:"success"}),(0,h.jsx)("span",{style:{marginLeft:"8px"},children:"Active"})]})})})]}),(0,h.jsx)(ee.ZP,{item:!0,xs:12,sm:6,children:(0,h.jsxs)(pe._,{dateAdapter:ue.H,children:[(0,h.jsxs)(te.Z,{htmlFor:"working-date",children:["Starting Date",(0,h.jsx)("div",{style:{color:"red",display:"inline"},children:" *"})]}),(0,h.jsx)(ce.$,{inputFormat:"dd/MM/yyyy",value:Y.values.startWorkingDate,onChange:function(e){return Y.setFieldValue("startWorkingDate",e||"")},renderInput:function(e){return(0,h.jsx)(ne.Z,(0,Z.Z)((0,Z.Z)((0,Z.Z)({},e),{},{fullWidth:!0},ve("startWorkingDate")),{},{error:Boolean(me.startWorkingDate&&ae.startWorkingDate),helperText:me.startWorkingDate&&ae.startWorkingDate,onChange:function(e){var t=e.target.value;/^\d{2}-\d{2}-\d{4}$/.test(t)&&Y.setFieldValue("startWorkingDate",t)},InputProps:(0,Z.Z)((0,Z.Z)({},e.InputProps),{},{sx:(0,Z.Z)((0,Z.Z)({},e.InputProps.sx),{},{borderRadius:"30px"})})}))}})]})})]})}),(0,h.jsxs)(ie.Z,{sx:{pr:2.5,mt:"130px",mb:"24px"},children:[(0,h.jsx)(w.Z,{variant:"outlined",onClick:function(){W?Y.values.email&&Y.values.department&&Y.values.group&&Y.values.level&&Y.values.position&&Y.values.role&&Y.values.startWorkingDate&&Y.values.email===a.email&&Y.values.department===a.person.Department.department_id&&Y.values.group===a.person.Group.group_id&&Y.values.level===a.person.level&&Y.values.position===a.person.Position.position_id&&Y.values.role===a.person.role&&Y.values.startWorkingDate===a.person.User.starting_working_date&&Y.values.isChecked===a.person.is_active?c():de().fire({title:"Discard change",text:"if you discard the change, this process will not be able to be undone.",showCancelButton:!0,reverseButtons:!0,confirmButtonText:"Confirm",cancelButtonText:"Cancel",customClass:{confirmButton:"confirm-rounded-button",cancelButton:"outlined-button"},iconHtml:'<div class="discard-icon"></div>'}).then((function(e){e.isConfirmed?c():(e.dismiss,de().DismissReason.cancel)})):Y.values.email||Y.values.department||Y.values.group||Y.values.level||Y.values.position||Y.values.role?de().fire({title:"Discard change",text:"if you discard the change, this process will not be able to be undone.",showCancelButton:!0,reverseButtons:!0,confirmButtonText:"Confirm",cancelButtonText:"Cancel",customClass:{confirmButton:"confirm-rounded-button",cancelButton:"outlined-button"},iconHtml:'<div class="discard-icon"></div>'}).then((function(e){e.isConfirmed?c():(e.dismiss,de().DismissReason.cancel)})):c()},sx:{mr:1.5,backgroundColor:"transparent",borderColor:"#393939",color:"#393939",borderRadius:"40px",width:"170px",height:"40px","&:hover":{backgroundColor:"#D2D2D2",borderColor:"#393939",color:"#393939"}},children:"Cancel"}),(0,h.jsx)(w.Z,{variant:"contained",type:"submit",sx:{backgroundColor:"#393939",borderRadius:"40px",width:"170px",height:"40px","&:hover":{backgroundColor:"#242424"}},children:"Save"})]})]})]})})},ve=function(){var e=(0,a.Z)(),t=(0,s.useState)(null),n=(0,i.Z)(t,2),u=n[0],p=n[1],m=(0,s.useState)(!1),v=(0,i.Z)(m,2),x=v[0],g=v[1],Z=(0,s.useState)(!1),j=(0,i.Z)(Z,2),b=(j[0],j[1],(0,s.useState)(!0)),C=(0,i.Z)(b,2),y=C[0],w=C[1],k=(0,s.useState)([]),S=(0,i.Z)(k,2),_=S[0],P=S[1],B="department",D=(0,s.useState)(""),R=(0,i.Z)(D,2),F=R[0],I=R[1],E=(0,s.useState)(!1),H=(0,i.Z)(E,2),T=H[0],W=H[1],U=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(){var t,n,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.setting.fetchUser();case 3:t=e.sent,n=t.data,(o=t.isStatus)&&(P(n),w(o)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,s.useEffect)((function(){U()}),[]);var M=L(_),q=function(){g(!x),I("add"),u&&x&&p(null),U(),W(!0),W(!T)},N=function(){var e=(0,o.Z)((0,r.Z)().mark((function e(t){return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("121212",t.person.user_id),de().fire({title:"Delete",text:"if you delete the information, this process will not be able to be undone.",icon:"warning",showCancelButton:!0,confirmButtonColor:"#0066FF",cancelButtonColor:"#0066FF",reverseButtons:!0,confirmButtonText:"Confirm",customClass:{confirmButton:"confirm-rounded-button",cancelButton:"outlined-button"},iconHtml:'<div class="delete-icon"></div>'}).then((function(e){if(e.isConfirmed)l.Z.profile.deleteProfile({id:t.person.user_id}).then((function(){U(),console.log("hello delete"),U(),de().fire({title:"Success",timer:2e3,customClass:"modal-success",text:"The information has been deleted",showConfirmButton:!1,iconHtml:'<div class="success-icon"></div>'})}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G=Y(q,p,B,e,y,N,(function(e){console.log("resend value",e),de().fire({title:"Resend email",text:"An email will be sent to ".concat(e.email),showCancelButton:!0,reverseButtons:!0,confirmButtonText:"Confirm",cancelButtonText:"Cancel",customClass:{confirmButton:"confirm-rounded-button",cancelButton:"outlined-button"},iconHtml:'<div class="mail-icon"></div>'}).then((function(t){if(t.isConfirmed){de().fire({title:"Success",customClass:"modal-success",timer:2e3,text:"An email has been resent",showConfirmButton:!1,iconHtml:'<div class="success-icon"></div>'});l.Z.profile.resendEmail(e.person)}else t.dismiss,de().DismissReason.cancel}))})),A=(0,s.useCallback)((function(e){var t=e.row;return(0,h.jsx)(f,{dataDepartment:M[t.id]})}),[M]);return(0,h.jsxs)("div",{children:[(0,h.jsx)(c.Z,{children:(0,h.jsx)(V,{columns:G,data:M,namepage:B,handleAdd:q,getHeaderProps:function(e){return e},renderRowSubComponent:A,sortColumn:"autoNumber"})}),(0,h.jsx)(d.Z,{maxWidth:"sm",fullWidth:!0,open:T,sx:{borderRadius:"10px","& .MuiDialog-paper":{p:0}},children:x&&(0,h.jsx)(me,{customer:u,handleClose:q,namePage:B,status:F})})]})}}}]);