"use strict";(self.webpackChunkmantis_material_react=self.webpackChunkmantis_material_react||[]).push([[1581],{61581:function(e,t,n){n.r(t),n.d(t,{default:function(){return A}});var r=n(1413),a=n(74165),i=n(15861),c=n(29439),o=n(47313),s=n(94469),l=n(38493),d=n(73842),u=n(84897),h=n(40750),f=function(e){var t=e,n=(0,o.useMemo)((function(){var e=[];return t&&t.forEach((function(n,r){t.length>0&&n.SubClients.forEach((function(t){var r={client_id:n.client_id,client_code:n.client_code,client_name:n.client_name,created_date:n.created_date,client_detail:t.client_detail,client_incharge:t.client_incharge,client_nickname:t.client_nickname,client_phone:t.client_phone,email:t.email,is_active:n.is_active,is_deleted:n.is_deleted};e.push(r)}))})),e}),[t]).slice().sort((function(e,t){return new Date(e.created_date)-new Date(t.created_date)}));return n.forEach((function(e,t){e.autoNumber=t+1})),n},_=n(51997),m=n(65954),p=n(42832),b=n(61689),x=n(25002),S=n(51405),Z=n(74748),y=n(83213),g=n(94044),v=n(38443),j=n(43997),w=n(46417),B=function(e,t,n){return[{Header:"No.",accessor:"autoNumber",disableSortBy:!0,className:"cell-right"},{Header:"ClientId",accessor:"client_id",disableSortBy:!0,hidden:!0},{Header:"Client Code",accessor:"client_code",disableSortBy:!0,truncate:12,width:"15%"},{Header:"Client Name",accessor:"client_name",disableSortBy:!0,width:"70%"},{Header:"Detail",accessor:"client_detail",disableSortBy:!0,hidden:!0},{Header:"Nickname",accessor:"client_nickname",disableSortBy:!0,hidden:!0},{Header:"Person in charge",accessor:"client_incharge",disableSortBy:!0,hidden:!0},{Header:"Email",accessor:"email",disableSortBy:!0,hidden:!0},{Header:"Phone Number",accessor:"client_phone",disableSortBy:!0,hidden:!0},{Header:"Contact Date",accessor:"created_date",disableSortBy:!0,hidden:!0},{Header:"IsActive",accessor:"is_active",disableSortBy:!0,hidden:!0},{Header:"IsDeleted",accessor:"is_deleted",disableSortBy:!0,hidden:!0},{Header:"Actions",className:"cell-center",width:"15%",disableSortBy:!0,Cell:function(r){var a=r.row,i=a.values,s=(a.isExpanded,a.toggleRowExpanded,(0,o.useState)(null)),l=(0,c.Z)(s,2),d=l[0],u=l[1];return(0,w.jsxs)(p.Z,{direction:"row",alignItems:"center",justifyContent:"center",spacing:0,children:[(0,w.jsx)(b.Z,{title:"See More",children:(0,w.jsx)(g.Z,{color:"secondary",onClick:function(e){u(e.currentTarget)},children:(0,w.jsx)(j.Z,{})})}),(0,w.jsxs)(x.ZP,{open:Boolean(d),anchorEl:d,onClose:function(){u(null)},anchorOrigin:{vertical:"bottom",horizontal:"center"},transformOrigin:{vertical:"top",horizontal:"center"},children:[(0,w.jsxs)(S.Z,{onClick:function(n){n.stopPropagation(),t(i),e()},children:[(0,w.jsx)(Z.Z,{children:(0,w.jsx)(m.Z,{fontSize:"small",sx:{color:"#0066FF"}})}),(0,w.jsx)(y.Z,{primary:"Edit"})]}),(0,w.jsxs)(S.Z,{disabled:i.is_active,onClick:function(){n(i)},children:[(0,w.jsx)(Z.Z,{children:(0,w.jsx)(_.Z,{fontSize:"small",sx:{color:"#ED4040"}})}),(0,w.jsx)(y.Z,{primary:"Delete"})]})]}),(0,w.jsx)(v.Z,{row:a})]})}}]},C=(n(67114),n(19860)),H=n(84999),k=function(e){var t=(0,o.useState)([]),n=(0,c.Z)(t,2),r=n[0],a=n[1];return(0,o.useEffect)((function(){a(e)}),[e]),(0,o.useMemo)((function(){var e=[];if(r)for(var t in r)if(Object.prototype.hasOwnProperty.call(r,t)){var n=r[t],a={subclient_id:n.subclient_id,client_incharge:n.client_incharge,client_nickname:n.client_nickname,createdAt:n.created_date,email:n.email,client_phone:n.client_phone,client_detail:n.client_detail};e.push(a)}return e}),[r])},P=n(30686).useTheme,E=function(e,t,n){P();return[{Header:"ClientId",accessor:"client_id",disableSortBy:!0,hidden:!0},{Header:"Code.",accessor:"client_code",disableSortBy:!0,hidden:!0},{Header:"Person\xa0in\xa0charge",accessor:"client_incharge",disableSortBy:!0,width:"20%"},{Header:"Nickname",accessor:"client_nickname",disableSortBy:!0,width:"20%"},{Header:"Email",accessor:"email",disableSortBy:!0,width:"20%"},{Header:"Phone\xa0number",accessor:"client_phone",disableSortBy:!0,width:"10%"},{Header:"Notes",accessor:"client_detail",disableSortBy:!0,width:"40%"},{Header:"Contact Date",accessor:"createdAt",disableSortBy:!0,width:"10%",hidden:"true"}]},D=function(e){(0,C.Z)();var t=k(e),n=(0,o.useState)(null),r=(0,c.Z)(n,2),a=r[0],i=r[1],s=(0,o.useState)(!1),l=(0,c.Z)(s,2),u=l[0],h=l[1],f=(0,o.useState)(null),_=(0,c.Z)(f,2),m=_[0],p=_[1],b=function(){h(!u),a&&u&&i(null)},x=E(b,i,(function(e){i(null),h(!1),p(e)}),m);return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("div",{style:{width:"100%",border:"1px solid #ccc",boxShadow:"0px 2px 4px rgba(0, 0, 0, 0.1)",borderRadius:"10px"},children:(0,w.jsx)(d.Z,{children:(0,w.jsx)(H.Z,{columns:x,data:t,handleAdd:b,getHeaderProps:function(e){return e.getSortByToggleProps()}})})})})},N=n(779),A=function(){var e=(0,o.useState)(null),t=(0,c.Z)(e,2),n=t[0],_=t[1],m=(0,o.useState)(!1),p=(0,c.Z)(m,2),b=p[0],x=p[1],S=(0,o.useState)([]),Z=(0,c.Z)(S,2),y=Z[0],g=Z[1],v=(0,o.useState)(!1),j=(0,c.Z)(v,2),C=j[0],H=j[1],k=f(y),P=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){var t,n;return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,u.Z.work.fetchSubDataClient();case 3:t=e.sent,n=t.data,t.isStatus&&g(n),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){P()}),[]);var E=function(){var e=(0,i.Z)((0,a.Z)().mark((function e(){return(0,a.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:x(!b),n&&b&&_(null),H(!0),H(!C);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=B(E,_,(function(e){(0,N.Z)(e,P,"client")})),I=(0,o.useCallback)((function(e){var t=e.row;return(0,w.jsx)(D,{DatafromIndex:k[t.id]})}),[k]),T={columns:A,data:k,renderRowSubComponent:I,getHeaderProps:function(e){return e.getSortByToggleProps()},nameCreateButton:"Clients",handleAdd:function(){return E()},handleDelete:function(){return(0,N.Z)()},sortColumn:"created_date"};return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)("div",{children:[(0,w.jsx)(d.Z,{children:(0,w.jsx)(l.Z,(0,r.Z)({},T))}),(0,w.jsx)(s.Z,{maxWidth:"lg",fullWidth:!0,open:C,PaperProps:{sx:{borderRadius:"10px"}},children:C&&(0,w.jsx)(h.Z,{customer:n,onCancel:E,fetchWorkTable:P})})]})})}}}]);