"use strict";(self.webpackChunkmantis_material_react=self.webpackChunkmantis_material_react||[]).push([[4520],{44520:function(e,t,n){n.r(t),n.d(t,{default:function(){return te}});var r=n(74165),i=n(15861),s=n(29439),o=n(47313),a=n(9019),l=n(84897),d=n(1413),c=n(24813),u=n(61113),p=n(31095),h=n(19536),m=n(48310),x=n(60194),f=n(15103),v=n(24631),Z=n(42832),g=n(76088),j=n(62870),b=n(7410),y=n(3463),F=n(44714),P=n(11653),k=n(43394),w=n(10259),C=n(1309),I=n(41412),_=n(72495),S=n(46417);var D=n(67114),M=n.n(D),R=(n(5242),function(e){console.log("customer");var t={firstname:"",lastname:"",nickname:"",phoneno:"",birthday:"",address:"",subdistrict:"",district:"",province:"",country:"",postcode:"",department:"",position:"",group:"",level:"",startWorkingDate:""};if(e){console.log("customer",e);var n={firstname:e.firstname,lastname:e.lastname,nickname:e.nickname,phoneno:e.phone,birthday:e.birthday,address:e.address||"",subdistrict:e.subdistrict,district:e.district,province:e.province,country:"",postcode:e.postcode,department:e.department,position:e.position,group:e.group,level:e.level,startWorkingDate:e.startworkdate};return console.log("Merged Customer:",n),n}return console.log("New Customer:",t),t}),E=y.Ry().shape({firstname:y.Z_().required("First name is required"),lastname:y.Z_().required("Last name is required"),nickname:y.Z_().required("Nickname is required"),phoneno:y.Z_().matches(/^\d{9,10}$/,"Phone no. must be 9 to 10 digits").required("Phone no. is required"),birthday:y.Z_().max(255).required("Birthday is required").nullable(),address:y.Z_().required("Address is required"),subdistrict:y.Z_().required("Sub-district is required"),district:y.Z_().required("District is required"),province:y.Z_().required("Province is required"),postcode:y.Z_().required("Postcode is required")}),V=function(e,t){fetch(e).then((function(e){return e.json()})).then((function(e){t(e)}))},L=function(e){var t=e.data,n=e.fetch,y=(0,o.useState)(""),_=(0,s.Z)(y,2),D=_[0],L=_[1],B=(0,o.useState)([]),W=(0,s.Z)(B,2),q=(W[0],W[1]),U=(0,o.useState)(),A=(0,s.Z)(U,2),T=(A[0],A[1]),Y=(0,o.useState)(!1),O=(0,s.Z)(Y,2),N=O[0],z=O[1],G=(0,o.useState)([]),$=(0,s.Z)(G,2),H=$[0],J=$[1],K=(0,o.useState)([]),Q=(0,s.Z)(K,2),X=Q[0],ee=Q[1],te=(0,o.useState)([]),ne=(0,s.Z)(te,2),re=ne[0],ie=ne[1],se=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.profile.fetchProfile();case 3:t=e.sent,n=t.data,(i=t.isStatus)&&(q(n),T(i)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),oe=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.enum.getEnumLevel();case 3:t=e.sent,n=t.data,i=t.isStatus,console.log(n),void 0!==i&&i&&L(n),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error(e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){oe(),se()}),[]);var ae=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("hello submit yoooooooooo"),t={firstname:de.values.firstname,lastname:de.values.lastname,nickname:de.values.nickname,phoneno:de.values.phoneno,birthday:de.values.birthday,address:de.values.address,subdistrict:de.values.subdistrict,district:de.values.district,province:de.values.province,postcode:de.values.postcode},console.log("updateProfile",t),e.prev=3,e.next=6,l.Z.profile.uploadSettingProfile(t).then((function(e){e.isStatus&&(n(),M().fire({title:"Success",timer:2e3,customClass:"modal-success",showConfirmButton:!1,iconHtml:'<div class="success-icon"></div>'}),z(!1))})).catch((function(e){console.error("Error uploading profile settings:",e),M().fire({title:"Error",text:"Profile update failed",icon:"error",timer:2e3,customClass:"modal-error",showConfirmButton:!1})}));case 6:e.sent,e.next=13;break;case 9:e.prev=9,e.t0=e.catch(3),console.error("Error uploading profile settings:",e.t0),M().fire({title:"Fail Ja",timer:2e3,customClass:"modal-success",showConfirmButton:!1,iconHtml:'<div class="discard-icon"></div>'});case 13:case"end":return e.stop()}}),e,null,[[3,9]])})));return function(){return e.apply(this,arguments)}}(),le=(0,c.Z)((function(e){return e.breakpoints.down("md")}));console.log("Data prop:",t);var de=(0,b.TA)({initialValues:R(t[0]),validationSchema:E,onSubmit:ae});(0,o.useEffect)((function(){V("https://raw.githubusercontent.com/kongvut/thai-province-data/master/api_province.json",J)}),[]),(0,o.useEffect)((function(){V("https://raw.githubusercontent.com/kongvut/thai-province-data/master/api_amphure.json",ee)}),[]),(0,o.useEffect)((function(){V("https://raw.githubusercontent.com/kongvut/thai-province-data/master/api_tambon.json",ie)}),[]),(0,o.useEffect)((function(){t&&t.map((function(e){me("firstname","".concat(e.firstname)),me("lastname",e.lastname),me("nickname",e.nickname),me("phoneno",e.phone||""),me("birthday",e.birthday),me("address",e.address||""),me("subdistrict",e.subdistrict),me("district",e.district),me("province",e.province),me("postcode",e.postcode)}))}),[t]);var ce=de.errors,ue=de.touched,pe=de.getFieldProps,he=de.handleSubmit,me=de.setFieldValue;return console.log("formik values",de.values),console.log("edit:",N),console.log("formik.values.subdistrict:",de.values.address),(0,S.jsx)(a.ZP,{item:!0,xs:12,sm:7,md:8,lg:9,children:(0,S.jsx)(a.ZP,{container:!0,spacing:3,children:(0,S.jsx)(a.ZP,{item:!0,xs:12,children:(0,S.jsxs)("form",{onSubmit:he,children:[(0,S.jsxs)(I.Z,{children:[(0,S.jsxs)(u.Z,{variant:"h4",sx:{my:"14px",display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,S.jsx)("span",{style:{flex:1,display:"flex",alignItems:"center"},children:"Personal Details"}),N?null:(0,S.jsx)(p.Z,{variant:"text",color:"primary",style:{padding:"0",minWidth:"auto"},onClick:function(){z(!0)},children:(0,S.jsx)(w.G,{icon:C.IwR,style:{color:"#0066ff"}})})]}),(0,S.jsx)(h.Z,{sx:{mb:"14px"}}),(0,S.jsxs)(m.Z,{sx:{py:0},children:[(0,S.jsx)(x.ZP,{children:(0,S.jsxs)(a.ZP,{container:!0,spacing:3,children:[(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsxs)(f.Z,{htmlFor:"email",children:["First name ",N?(0,S.jsx)("div",{style:{color:"red",display:"inline"},children:" *"}):null]}),(0,S.jsx)(v.Z,(0,d.Z)((0,d.Z)({placeholder:"Enter Fisrt Name",disabled:!N,value:de.values.firstname},pe("firstname")),{},{fullWidth:!0,error:Boolean(ue.firstname&&ce.firstname),helperText:ue.firstname&&ce.firstname,InputProps:{style:{backgroundColor:N?"":"#F3F4F6",borderRadius:"30px "}}}))]}),(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsxs)(f.Z,{htmlFor:"email",children:["Last name",N?(0,S.jsx)("div",{style:{color:"red",display:"inline"},children:" *"}):null]}),(0,S.jsx)(v.Z,(0,d.Z)((0,d.Z)({disabled:!N,placeholder:"Enter Last Name",value:de.values.lastname},pe("lastname")),{},{fullWidth:!0,error:Boolean(ue.lastname&&ce.lastname),helperText:ue.lastname&&ce.lastname,InputProps:{style:{backgroundColor:N?"":"#F3F4F6",borderRadius:"30px "}}}))]})]})}),(0,S.jsx)(x.ZP,{children:(0,S.jsxs)(a.ZP,{container:!0,spacing:3,children:[(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsxs)(f.Z,{htmlFor:"email",children:["Nickname",N?(0,S.jsx)("div",{style:{color:"red",display:"inline"},children:" *"}):null]}),(0,S.jsx)(v.Z,(0,d.Z)((0,d.Z)({disabled:!N,placeholder:"Enter Nickname",value:de.values.nickname},pe("nickname")),{},{fullWidth:!0,error:Boolean(ue.nickname&&ce.nickname),helperText:ue.nickname&&ce.nickname,InputProps:{style:{backgroundColor:N?"":"#F3F4F6",borderRadius:"30px "}}}))]}),(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsxs)(f.Z,{htmlFor:"email",children:["Phone number",N?(0,S.jsx)("div",{style:{color:"red",display:"inline"},children:" *"}):null]}),(0,S.jsx)(j.Z,{customInput:v.Z,disabled:!N,format:"###-#######",mask:"_",placeholder:"Enter Phone no.",value:de.values.phoneno,fullWidth:!0,onValueChange:function(e){e.formattedValue;var t=e.value;console.log("phone no value",t),de.setFieldValue("phoneno",t)},error:Boolean(ue.phoneno&&ce.phoneno),helperText:ue.phoneno&&ce.phoneno,InputProps:{style:{backgroundColor:N?"":"#F3F4F6",borderRadius:"30px "}}})]})]})}),(0,S.jsx)(x.ZP,{children:(0,S.jsxs)(a.ZP,{container:!0,spacing:3,children:[(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsxs)(f.Z,{htmlFor:"working-date",children:["Birthday",N?(0,S.jsx)("div",{style:{color:"red",display:"inline"},children:" *"}):null]}),(0,S.jsx)(k._,{dateAdapter:P.H,children:(0,S.jsx)(F.$,{disabled:!N,inputFormat:"dd/MM/yyyy",placeholder:"DD/MM/YYYY",maxDate:new Date,value:de.values.birthday,onChange:function(e){return de.setFieldValue("birthday",e)},renderInput:function(e){return(0,S.jsx)(v.Z,(0,d.Z)((0,d.Z)((0,d.Z)({},e),{},{fullWidth:!0},pe("birthday")),{},{error:Boolean(ue.birthday&&ce.birthday),helperText:ue.birthday&&ce.birthday,onChange:function(e){var t=e.target.value;/^\d{2}\/\d{2}\/\d{4}$/.test(t)&&de.setFieldValue("birthday",t)},InputProps:(0,d.Z)((0,d.Z)({},e.InputProps),{},{sx:(0,d.Z)((0,d.Z)({},e.InputProps.sx),{},{backgroundColor:N?"":"#F3F4F6",borderRadius:"30px "})})}))}})})]}),(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsx)(f.Z,{htmlFor:"email",children:"Age"}),(0,S.jsx)(v.Z,{disabled:!0,value:function(e){if(!e)return"";var t=new Date,n=new Date(e),r=t.getFullYear()-n.getFullYear(),i=t.getMonth()-n.getMonth();return i<0&&(r--,i+=12),r>0?"".concat(r):i>0?"".concat(i," Month").concat(1!==i?"s":""):"Less than 1 Month"}(de.values.birthday),fullWidth:!0,InputProps:{style:{backgroundColor:"#F3F4F6",borderRadius:"30px "}}})]})]})}),(0,S.jsx)(x.ZP,{children:(0,S.jsx)(a.ZP,{container:!0,spacing:3,children:(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:12,children:[(0,S.jsxs)(f.Z,{htmlFor:"email",children:["Address",N?(0,S.jsx)("div",{style:{color:"red",display:"inline"},children:" *"}):null]}),(0,S.jsx)(v.Z,(0,d.Z)((0,d.Z)({disabled:!N,placeholder:"Enter Address",value:de.values.address},pe("address")),{},{fullWidth:!0,error:Boolean(ue.address&&ce.address),helperText:ue.address&&ce.address,InputProps:{style:{backgroundColor:N?"":"#F3F4F6",borderRadius:"30px "}}}))]})})}),(0,S.jsx)(x.ZP,{children:(0,S.jsxs)(a.ZP,{container:!0,spacing:3,children:[(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsxs)(f.Z,{htmlFor:"password-reset",children:["Province",N?(0,S.jsx)("div",{style:{color:"red",display:"inline"},children:" *"}):null]}),(0,S.jsx)(g.Z,{id:"role",disabled:!N,options:H,getOptionLabel:function(e){return e.name_en},value:H.find((function(e){return e.id===de.values.province}))||null,onChange:function(e,t){null!==t?(de.setFieldValue("province",t.id),de.setFieldValue("district",""),de.setFieldValue("subdistrict",""),de.setFieldValue("postcode","")):(de.setFieldValue("province",""),de.setFieldValue("district",""),de.setFieldValue("subdistrict",""),de.setFieldValue("postcode",""))},fullWidth:!0,margin:"normal",renderInput:function(e){return(0,S.jsx)("div",{style:{position:"relative"},children:(0,S.jsx)(v.Z,(0,d.Z)((0,d.Z)({},e),{},{placeholder:"Select Province",error:Boolean(ue.province&&ce.province),helperText:ue.province&&ce.province,InputProps:(0,d.Z)((0,d.Z)({},e.InputProps),{},{style:{backgroundColor:N?"":"#F3F4F6",borderRadius:"30px "}})}))})}})]}),(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsxs)(f.Z,{htmlFor:"password-reset",children:["District",N?(0,S.jsx)("div",{style:{color:"red",display:"inline"},children:" *"}):null]}),(0,S.jsx)(g.Z,{id:"role",disabled:!N||!de.values.province,options:X.filter((function(e){return e.province_id===de.values.province})),getOptionLabel:function(e){return e.name_en},value:X.find((function(e){return e.id===de.values.district}))||null,onChange:function(e,t){null!==t?(de.setFieldValue("district",t.id),de.setFieldValue("subdistrict",""),de.setFieldValue("postcode","")):(de.setFieldValue("district",""),de.setFieldValue("subdistrict",""),de.setFieldValue("postcode",""))},fullWidth:!0,margin:"normal",renderInput:function(e){return(0,S.jsx)("div",{style:{position:"relative"},children:(0,S.jsx)(v.Z,(0,d.Z)((0,d.Z)({},e),{},{placeholder:"Select District",error:Boolean(ue.district&&ce.district),helperText:de.values.province?ue.district&&ce.district:null,InputProps:(0,d.Z)((0,d.Z)({},e.InputProps),{},{style:{backgroundColor:!N||!de.values.province||de.values.province.length<=0?"#F3F4F6":"",borderRadius:"30px "}})}))})}})]})]})}),(0,S.jsx)(x.ZP,{children:(0,S.jsxs)(a.ZP,{container:!0,spacing:3,children:[(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsxs)(f.Z,{htmlFor:"password-reset",children:["Sub-district",N?(0,S.jsx)("div",{style:{color:"red",display:"inline"},children:" *"}):null]}),(0,S.jsx)(g.Z,{id:"role",disabled:!N||!de.values.district,options:re.filter((function(e){return e.amphure_id===de.values.district})),getOptionLabel:function(e){return e.name_en},value:re.find((function(e){return e.id===de.values.subdistrict}))||null,onChange:function(e,t){null!==t?(de.setFieldValue("subdistrict",t.id),de.setFieldValue("postcode",t.zip_code)):(de.setFieldValue("subdistrict",""),de.setFieldValue("postcode",""))},fullWidth:!0,margin:"normal",renderInput:function(e){return(0,S.jsx)("div",{style:{position:"relative"},children:(0,S.jsx)(v.Z,(0,d.Z)((0,d.Z)({},e),{},{placeholder:"Select Sub-district",error:Boolean(ue.subdistrict&&ce.subdistrict),helperText:de.values.district?ue.subdistrict&&ce.subdistrict:null,InputProps:(0,d.Z)((0,d.Z)({},e.InputProps),{},{style:{backgroundColor:!N||!de.values.district||de.values.district.length<=0?"#F3F4F6":"",borderRadius:"30px "}})}))})}})]}),(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsxs)(f.Z,{htmlFor:"email",children:["Postcode",N?(0,S.jsx)("div",{style:{color:"red",display:"inline"},children:" *"}):null]}),(0,S.jsx)(v.Z,(0,d.Z)((0,d.Z)({disabled:!N||!de.values.subdistrict,placeholder:"Enter Postcode",value:de.values.postcode},pe("postcode")),{},{fullWidth:!0,error:Boolean(ue.postcode&&ce.postcode),helperText:de.values.subdistrict?ue.postcode&&ce.postcode:null,InputProps:{style:{backgroundColor:!N||!de.values.subdistrict||de.values.subdistrict.length<=0?"#F3F4F6":"",borderRadius:"30px "}}}))]})]})})]}),(0,S.jsx)(u.Z,{variant:"h4",sx:{my:"14px"},children:"Working Details"}),(0,S.jsx)(h.Z,{sx:{mb:"14px"}}),t.map((function(e,t){return(0,S.jsxs)(m.Z,{sx:{py:0},children:[(0,S.jsx)(x.ZP,{children:(0,S.jsxs)(a.ZP,{container:!0,spacing:3,children:[(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsx)(f.Z,{htmlFor:"email",children:"Department"}),(0,S.jsx)(v.Z,{placeholder:"Department",disabled:!0,value:e.department,fullWidth:!0,InputProps:{style:{backgroundColor:"#F3F4F6",borderRadius:"30px "}}})]}),(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsx)(f.Z,{htmlFor:"email",children:"Group"}),(0,S.jsx)(v.Z,{placeholder:"Group",disabled:!0,value:e.group,fullWidth:!0,InputProps:{style:{backgroundColor:"#F3F4F6",borderRadius:"30px "}}})]})]})}),(0,S.jsx)(x.ZP,{children:(0,S.jsxs)(a.ZP,{container:!0,spacing:3,children:[(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsx)(f.Z,{htmlFor:"email",children:"Position"}),(0,S.jsx)(v.Z,{placeholder:"Position",disabled:!0,value:e.position,fullWidth:!0,InputProps:{style:{backgroundColor:"#F3F4F6",borderRadius:"30px "}}})]}),(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsx)(f.Z,{htmlFor:"email",children:"Level"}),(0,S.jsx)(g.Z,{id:"level",disabled:!0,options:D,getOptionLabel:function(e){return e.name_eng||""},value:D&&D.find((function(t){return t.enum_id===e.level}))||null,fullWidth:!0,margin:"normal",renderInput:function(e){return(0,S.jsx)("div",{style:{position:"relative"},children:(0,S.jsx)(v.Z,(0,d.Z)((0,d.Z)((0,d.Z)({},e),{},{placeholder:"Select Level"},pe("level")),{},{InputProps:(0,d.Z)((0,d.Z)({},e.InputProps),{},{style:{backgroundColor:"#F3F4F6",borderRadius:"30px "}})}))})}})]})]})}),(0,S.jsx)(x.ZP,{children:(0,S.jsxs)(a.ZP,{container:!0,spacing:3,children:[(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsx)(f.Z,{htmlFor:"email",children:"Starting Date"}),(0,S.jsx)(v.Z,{placeholder:"Enter Email",disabled:!0,value:e.startworkdate,fullWidth:!0,InputProps:{style:{backgroundColor:"#F3F4F6",borderRadius:"30px "}}})]}),(0,S.jsxs)(a.ZP,{item:!0,xs:12,md:6,children:[(0,S.jsx)(f.Z,{htmlFor:"email",children:"Year Experience"}),(0,S.jsx)(v.Z,{placeholder:"Year Exp",disabled:!0,value:e.yearexp,fullWidth:!0,InputProps:{style:{color:"#B8B9BA",backgroundColor:"#F3F4F6",borderRadius:"30px"}}})]})]})})]},t)}))]}),N?(0,S.jsx)(I.Z,{children:(0,S.jsxs)(Z.Z,{direction:le?"column-reverse":"row",justifyContent:"flex-end",alignItems:"center",spacing:1,children:[(0,S.jsx)(p.Z,{variant:"outlined",onClick:function(){t&&t.map((function(e){var t,n,r,i=(null===(t=H.find((function(t){return t.name_en===e.province})))||void 0===t?void 0:t.id)||"";null===(n=X.find((function(t){return t.name_en===e.district})))||void 0===n||n.id,null===(r=re.find((function(t){return t.name_en===e.subdistrict})))||void 0===r||r.id;console.log("provincess",i),me("firstname","".concat(e.firstname)),me("lastname",e.lastname),me("nickname",e.nickname),me("phoneno",e.phone||""),me("birthday",e.birthday),me("address",e.address),me("subdistrict",e.subdistrict),me("district",e.district),me("province",e.province),me("postcode",e.postcode)})),de.setErrors({}),de.setTouched({}),z(!1)},sx:{mr:"10px",backgroundColor:"transparent",borderColor:"#393939",color:"#393939",borderRadius:"40px",width:"170px",height:"40px","&:hover":{backgroundColor:"#D2D2D2",borderColor:"#393939",color:"#393939"}},children:"Cancel"}),(0,S.jsx)(p.Z,{variant:"contained",type:"submit",sx:{backgroundColor:"#393939",borderRadius:"40px",width:"170px",height:"40px","&:hover":{backgroundColor:"#242424"}},children:"Save"})]})}):null]})})})})},B=n(19860),W=n(5178),q=n(57829),U=n(74748),A=n(89600),T=n(24897),Y=n(10392),O=n(4123),N=n(87866),z=n(42897),G={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M574 665.4a8.03 8.03 0 00-11.3 0L446.5 781.6c-53.8 53.8-144.6 59.5-204 0-59.5-59.5-53.8-150.2 0-204l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3l-39.8-39.8a8.03 8.03 0 00-11.3 0L191.4 526.5c-84.6 84.6-84.6 221.5 0 306s221.5 84.6 306 0l116.2-116.2c3.1-3.1 3.1-8.2 0-11.3L574 665.4zm258.6-474c-84.6-84.6-221.5-84.6-306 0L410.3 307.6a8.03 8.03 0 000 11.3l39.7 39.7c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c53.8-53.8 144.6-59.5 204 0 59.5 59.5 53.8 150.2 0 204L665.3 562.6a8.03 8.03 0 000 11.3l39.8 39.8c3.1 3.1 8.2 3.1 11.3 0l116.2-116.2c84.5-84.6 84.5-221.5 0-306.1zM610.1 372.3a8.03 8.03 0 00-11.3 0L372.3 598.7a8.03 8.03 0 000 11.3l39.6 39.6c3.1 3.1 8.2 3.1 11.3 0l226.4-226.4c3.1-3.1 3.1-8.2 0-11.3l-39.5-39.6z"}}]},name:"link",theme:"outlined"},$=n(20262),H=function(e,t){return o.createElement($.Z,(0,d.Z)((0,d.Z)({},e),{},{ref:t,icon:G}))};H.displayName="LinkOutlined";var J=o.forwardRef(H),K=n(40918).lW,Q=n(5242),X=function(e){var t=e.data,n=(0,B.Z)(),d=(0,o.useState)(null),c=(0,s.Z)(d,2),p=c[0],h=c[1],f=(0,o.useState)(Q("./default.png")),g=(0,s.Z)(f,2),b=(g[0],g[1]),y=(0,o.useState)(null),F=(0,s.Z)(y,2),P=(F[0],F[1]),k=(0,o.useState)(null),w=(0,s.Z)(k,2),C=(w[0],w[1],(0,o.useState)()),D=(0,s.Z)(C,2),M=D[0],R=D[1],E=(0,o.useState)(null),V=(0,s.Z)(E,2),L=(V[0],V[1],(0,o.useState)([])),G=(0,s.Z)(L,2),$=G[0],H=G[1];console.log("datanow update in mini",t);var X=function(e){if(!e)return"";var t=new Date,n=new Date(e),r=t.getFullYear()-n.getFullYear(),i=t.getMonth()-n.getMonth(),s=(0,A.Z)(n,"dd MMMM yyyy");return i<0&&(r--,i+=12),r>0?"".concat(s," (").concat(r,")"):i>0?"".concat(s," (").concat(i," Month").concat(1!==i?"s)":")"):"${formattedDate} (Less than 1 Month)"},ee=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i,s,o;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.profile.fetchImg();case 3:t=e.sent,n=t.data,t.isStatus&&(console.log("data",n.img),n.img&&n.img.length>=1?(i=null===n||void 0===n?void 0:n.img[0])?(s=K.from(i,"base64"),o=s.toString("base64"),H(o)):console.log("No picture available"):console.log("dont have picture")),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),te=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=6;break}return e.next=3,p.arrayBuffer();case 3:t=e.sent,n=URL.createObjectURL(new Blob([t])),R(n);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){ee(),te(),p&&(b(URL.createObjectURL(p)),function(e){P(e);var t=new FileReader;t.readAsDataURL(p),t.onload=function(){var e=t.result.split(",")[1];l.Z.profile.uploadProfile({picture:"".concat(e)}).then((function(e){console.log("Image uploaded successfully:",e)})).catch((function(e){console.error("Error uploading image:",e)}))}}(p),ee())}),[p]);return(0,S.jsx)(a.ZP,{item:!0,xs:12,sm:5,md:4,lg:3,sx:{borderRadius:"10px"},children:(0,S.jsx)(a.ZP,{container:!0,spacing:3,children:(0,S.jsx)(a.ZP,{item:!0,xs:12,children:(0,S.jsx)(I.Z,{children:t.map((function(e,t){return(0,S.jsxs)(a.ZP,{container:!0,spacing:3,children:[(0,S.jsx)(a.ZP,{item:!0,xs:12,children:(0,S.jsxs)(Z.Z,{spacing:2.5,alignItems:"center",children:[(0,S.jsxs)(W.Z,{htmlFor:"change-avtar",sx:{position:"relative",borderRadius:"50%",overflow:"hidden","&:hover .MuiBox-root":{opacity:1},cursor:"pointer"},children:[(0,S.jsx)(_.Z,{alt:"Avatar 1",src:$.length>=1?M||"data:image/jpeg;base64,".concat($):T,sx:{width:124,height:124,border:"1px dashed"}}),(0,S.jsx)(q.Z,{sx:{position:"absolute",top:0,left:0,backgroundColor:"dark"===n.palette.mode?"rgba(255, 255, 255, .75)":"rgba(0,0,0,.65)",width:"100%",height:"100%",opacity:0,display:"flex",alignItems:"center",justifyContent:"center"},children:(0,S.jsxs)(Z.Z,{spacing:.5,alignItems:"center",children:[(0,S.jsx)(Y.Z,{style:{color:n.palette.secondary.lighter,fontSize:"2rem"}}),(0,S.jsx)(u.Z,{sx:{color:"secondary.lighter"},children:"Upload"})]})})]}),(0,S.jsx)(v.Z,{type:"file",id:"change-avtar",label:"Outlined",variant:"outlined",sx:{display:"none"},onChange:function(e){var t;return h(null===(t=e.target.files)||void 0===t?void 0:t[0])},inputProps:{accept:"image/*"}}),(0,S.jsxs)(Z.Z,{spacing:.5,alignItems:"center",children:[(0,S.jsx)(u.Z,{variant:"h5",children:e.fullname}),(0,S.jsx)(u.Z,{color:"secondary",children:"(".concat(e.nickname,")")}),(0,S.jsx)(u.Z,{color:"secondary",children:e.position}),(0,S.jsx)(u.Z,{color:"secondary",children:e.group})]})]})}),(0,S.jsx)(a.ZP,{item:!0,xs:12,children:(0,S.jsxs)(m.Z,{component:"nav","aria-label":"main mailbox folders",sx:{py:0},children:[(0,S.jsx)(x.ZP,{children:(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,S.jsx)(U.Z,{children:(0,S.jsx)(O.Z,{})}),(0,S.jsx)("div",{children:(0,S.jsx)("span",{children:" Phone number"})})]}),(0,S.jsx)(u.Z,{align:"right",children:(0,S.jsx)(j.Z,{displayType:"text",format:"###-###-####",mask:"_",value:e.phone})})]})}),(0,S.jsx)(x.ZP,{children:(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",width:"225px"},children:[(0,S.jsx)(U.Z,{children:(0,S.jsx)(N.Z,{})}),(0,S.jsx)("div",{children:(0,S.jsx)("span",{children:"Email"})})]}),(0,S.jsx)(u.Z,{sx:{width:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},title:e.email,children:e.email})]})}),(0,S.jsx)(x.ZP,{children:(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,S.jsx)(U.Z,{children:(0,S.jsx)(z.Z,{})}),(0,S.jsx)("div",{children:(0,S.jsx)("span",{children:"Start Date"})})]}),(0,S.jsx)(u.Z,{align:"right",children:(r=e.startworkdate,r?(0,A.Z)(new Date(r),"dd MMMM yyyy"):"")})]})}),(0,S.jsx)(x.ZP,{children:(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[(0,S.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,S.jsx)(U.Z,{children:(0,S.jsx)(J,{})}),(0,S.jsx)("div",{children:(0,S.jsx)("span",{children:"Date of Birth"})})]}),(0,S.jsx)(u.Z,{align:"right",children:X(e.birthday)})]})})]})})]},t);var r}))})})})})},ee=(n(70816),n(36287),function(e){var t=(0,o.useState)([]),n=(0,s.Z)(t,2),r=(n[0],n[1],(0,o.useState)([])),i=(0,s.Z)(r,2),a=(i[0],i[1]),l=(0,o.useState)([]),d=(0,s.Z)(l,2),c=(d[0],d[1]),u=(0,o.useState)([]),p=(0,s.Z)(u,2),h=(p[0],p[1]);console.log("datanow",e);var m=function(e,t){fetch(e).then((function(e){return e.json()})).then((function(e){t(e)}))};(0,o.useEffect)((function(){m("https://raw.githubusercontent.com/kongvut/thai-province-data/master/api_province.json",a)}),[]),(0,o.useEffect)((function(){m("https://raw.githubusercontent.com/kongvut/thai-province-data/master/api_amphure.json",c)}),[]),(0,o.useEffect)((function(){m("https://raw.githubusercontent.com/kongvut/thai-province-data/master/api_tambon.json",h)}),[]);return(0,o.useMemo)((function(){var t=[],n=function(e){return e?(0,A.Z)(new Date(e),"dd MMMM yyyy"):""},r=function(e){var t=new Date,n=new Date(e),r=Math.abs(n-t),i=Math.ceil(r/864e5);if(n&&t&&n<=t){var s=Math.floor(i/365),o=i%365,a=Math.floor(o/30),l=o%30,d="";return s>0&&(d+="".concat(s," Year").concat(1!==s?"s":""," ")),a>0&&(d+="".concat(a," Month").concat(1!==a?"s":""," ")),l>0&&(d+="".concat(l," Day").concat(1!==l?"s":""," ")),d.trim()}return n&&t&&n>t?"".concat(i," D Remaining"):null};if(e){e.forEach((function(i){if(console.log("datanow person",i),e.length>0){var s,o,a,l,d,c,u,p,h={fullname:"".concat(i.User.first_name," ").concat(i.User.last_name),firstname:i.User.first_name,lastname:i.User.last_name,nickname:i.User.nick_name,birthday:n(i.User.birthday),email:i.User.username,department:i.Department.department_name,position:i.Position.position_name,group:i.Group.group_name,gender:i.gender,level:i.level,phone:i.User.user_phone,startworkdate:n(i.User.starting_working_date),yearexp:r(i.User.starting_working_date),address:null===(s=i.Addresses[0])||void 0===s?void 0:s.information,province:parseInt(null===(o=i.Addresses[0])||void 0===o||null===(a=o.province)||void 0===a?void 0:a.trim(),10)||0,district:parseInt(null===(l=i.Addresses[0])||void 0===l||null===(d=l.district)||void 0===d?void 0:d.trim(),10)||0,subdistrict:parseInt(null===(c=i.Addresses[0])||void 0===c||null===(u=c.sub_district)||void 0===u?void 0:u.trim(),10)||0,postcode:null===(p=i.Addresses[0])||void 0===p?void 0:p.postcode};t.push(h)}}))}return console.log("group data",t),t}),[e])}),te=(n(5242),function(){var e=(0,o.useState)([]),t=(0,s.Z)(e,2),n=t[0],d=t[1],c=(0,o.useState)(),u=(0,s.Z)(c,2),p=(u[0],u[1]),h=function(){var e=(0,i.Z)((0,r.Z)().mark((function e(){var t,n,i;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,l.Z.profile.fetchProfile();case 3:t=e.sent,n=t.data,(i=t.isStatus)&&(d(n),p(i)),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();(0,o.useEffect)((function(){h()}),[]);var m=function(){h()},x=ee(n);return(0,S.jsxs)(a.ZP,{container:!0,spacing:1,children:[(0,S.jsx)(X,{data:x,fetch:m}),(0,S.jsx)(L,{data:x,fetch:m})]})})}}]);