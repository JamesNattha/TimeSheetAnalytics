"use strict";(self.webpackChunkmantis_material_react=self.webpackChunkmantis_material_react||[]).push([[6498],{96498:function(e,n,t){t.r(n);var r=t(74165),s=t(15861),a=t(29439),i=t(47313),c=t(84897),u=t(46417);n.default=function(e){e.boardId;var n=(0,i.useState)([]),t=(0,a.Z)(n,2),l=t[0],d=t[1],o=(0,i.useState)([]),p=(0,a.Z)(o,2),f=p[0],h=p[1],x=(0,i.useState)([]),m=(0,a.Z)(x,2),v=m[0],j=m[1],b=(0,i.useState)(""),Z=(0,a.Z)(b,2),k=Z[0],S=Z[1],y=(0,i.useState)(!0),g=(0,a.Z)(y,2),w=g[0],_=g[1];(0,i.useEffect)((function(){var e=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n,t,s;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.monday.fetchDataAll();case 3:n=e.sent,t=n.data,s=n.isStatus,console.log("Response Data:",t.data.boards),s&&d(t.data.boards),_(!1),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error(e.t0),_(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),n=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.monday.fetchMondayUser();case 3:n=e.sent,t=n.data,n.isStatus&&h(t.data.users),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=(0,s.Z)((0,r.Z)().mark((function e(){var n,t;return(0,r.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,c.Z.monday.fetchUser();case 3:n=e.sent,t=n.data,n.isStatus&&j(t),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(){return e.apply(this,arguments)}}();e(),n(),t()}),[]),(0,i.useEffect)((function(){var e=f.find((function(e){return v.some((function(n){return n.username===e.email}))}));e&&S(e.id)}),[f,v]);var N=l.filter((function(e){return e.name.startsWith("Subitems of")})),A=N.filter((function(e){return void 0!==e.items.find((function(e){return e.column_values&&e.column_values.some((function(e){return!("person"!==e.id||!e.value)&&JSON.parse(e.value).personsAndTeams.some((function(e){return e.id===k}))}))}))}));return console.log("data 1",A),console.log("data 2",N),console.log("data 3",k),w?(0,u.jsx)("div",{children:(0,u.jsx)("h1",{children:"Loading..."})}):(0,u.jsxs)("div",{children:[(0,u.jsx)("h2",{children:"Items"}),(0,u.jsxs)("table",{children:[(0,u.jsx)("thead",{children:(0,u.jsxs)("tr",{children:[(0,u.jsx)("th",{children:"Project"}),(0,u.jsx)("th",{children:"Subitems Name"}),k&&(0,u.jsx)("th",{children:"Owner"}),k&&(0,u.jsx)("th",{children:"Email"}),(0,u.jsx)("th",{children:"Status"})]})}),(0,u.jsxs)("tbody",{children:[A.map((function(e){return e.items.map((function(n){var t=n.column_values.find((function(e){return"person"===e.id}));if(t&&t.value&&""!==t.value){var r=JSON.parse(t.value).personsAndTeams.map((function(e){return e.id}));if(r.includes(k))return(0,u.jsxs)("tr",{children:[(0,u.jsx)("td",{style:{border:"1px solid black",padding:"8px"},children:e.name.replace("Subitems of","")}),(0,u.jsx)("td",{style:{border:"1px solid black",padding:"8px"},children:n.name}),(0,u.jsx)("td",{style:{border:"1px solid black",padding:"8px"},children:f.filter((function(e){return r.includes(e.id)})).map((function(e){return(0,u.jsxs)("span",{children:[e.name,(0,u.jsx)("br",{})]},e.id)}))}),(0,u.jsx)("td",{style:{border:"1px solid black",padding:"8px"},children:f.filter((function(e){return r.includes(e.id)})).map((function(e){return(0,u.jsxs)("span",{children:[e.email,(0,u.jsx)("br",{})]},e.id)}))}),(0,u.jsx)("td",{style:{border:"1px solid black",padding:"8px"},children:n.column_values&&n.column_values.map((function(e){return"status"===e.id?(0,u.jsx)("span",{children:e.text},e.id):null}))})]},n.id)}return null}))})),0===A.length&&(0,u.jsx)("tr",{children:(0,u.jsx)("td",{colSpan:k?5:4,children:"No items"})})]})]})]})}}}]);